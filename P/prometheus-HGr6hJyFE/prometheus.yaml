apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: prometheus-netpol
  namespace: default
spec:
  policyTypes:
    - Egress
    - Ingress
  podSelector:
    matchLabels:
      application: prometheus
  egress:
    - to:
        - podSelector:
            matchLabels:
              application: alerts
      ports:
        - port: 9093
          protocol: TCP
        - port: 80
          protocol: TCP
        - port: 9094
          protocol: TCP
    - to:
        - podSelector:
            matchLabels:
              application: ldap
      ports:
        - port: 389
          protocol: TCP
    - to:
        - namespaceSelector:
            matchLabels:
              name: docker-registry
      ports:
        - port: 5000
          protocol: TCP
    - to:
        - podSelector:
            matchLabels:
              application: prom
      ports:
        - port: 9090
          protocol: TCP
        - port: 80
          protocol: TCP
    - {}
  ingress:
    - {}
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: release-name-test
  namespace: HGr6hJyFE
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: release-name-prometheus
  namespace: HGr6hJyFE
---
apiVersion: v1
kind: Secret
metadata:
  name: release-name-prometheus-etc
type: Opaque
data:
  prometheus.yml: Z2xvYmFsOgogIHNjcmFwZV9pbnRlcnZhbDogNjBzCiAgZXZhbHVhdGlvbl9pbnRlcnZhbDogNjBzCiAgZXh0ZXJuYWxfbGFiZWxzOgogICAgcHJvbWV0aGV1c19ob3N0OiBwcm9tZXRoZXVzLmRlZmF1bHQuc3ZjLmNsdXN0ZXIubG9jYWwKc2NyYXBlX2NvbmZpZ3M6CiAgLSBqb2JfbmFtZToga3ViZWxldAogICAgc2NoZW1lOiBodHRwcwogICAgIyBUaGlzIFRMUyAmIGJlYXJlciB0b2tlbiBmaWxlIGNvbmZpZyBpcyB1c2VkIHRvIGNvbm5lY3QgdG8gdGhlIGFjdHVhbCBzY3JhcGUKICAgICMgZW5kcG9pbnRzIGZvciBjbHVzdGVyIGNvbXBvbmVudHMuIFRoaXMgaXMgc2VwYXJhdGUgdG8gZGlzY292ZXJ5IGF1dGgKICAgICMgY29uZmlndXJhdGlvbiBiZWNhdXNlIGRpc2NvdmVyeSAmIHNjcmFwaW5nIGFyZSB0d28gc2VwYXJhdGUgY29uY2VybnMgaW4KICAgICMgUHJvbWV0aGV1cy4gVGhlIGRpc2NvdmVyeSBhdXRoIGNvbmZpZyBpcyBhdXRvbWF0aWMgaWYgUHJvbWV0aGV1cyBydW5zIGluc2lkZQogICAgIyB0aGUgY2x1c3Rlci4gT3RoZXJ3aXNlLCBtb3JlIGNvbmZpZyBvcHRpb25zIGhhdmUgdG8gYmUgcHJvdmlkZWQgd2l0aGluIHRoZQogICAgIyA8a3ViZXJuZXRlc19zZF9jb25maWc+LgogICAgdGxzX2NvbmZpZzoKICAgICAgY2FfZmlsZTogL3Zhci9ydW4vc2VjcmV0cy9rdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L2NhLmNydAogICAgYmVhcmVyX3Rva2VuX2ZpbGU6IC92YXIvcnVuL3NlY3JldHMva3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC90b2tlbgogICAga3ViZXJuZXRlc19zZF9jb25maWdzOgogICAgLSByb2xlOiBub2RlCiAgICBzY3JhcGVfaW50ZXJ2YWw6IDQ1cwogICAgcmVsYWJlbF9jb25maWdzOgogICAgLSBhY3Rpb246IGxhYmVsbWFwCiAgICAgIHJlZ2V4OiBfX21ldGFfa3ViZXJuZXRlc19ub2RlX2xhYmVsXyguKykKICAgIC0gdGFyZ2V0X2xhYmVsOiBfX2FkZHJlc3NfXwogICAgICByZXBsYWNlbWVudDoga3ViZXJuZXRlcy5kZWZhdWx0LnN2Yzo0NDMKICAgIC0gc291cmNlX2xhYmVsczoKICAgICAgICAtIF9fbWV0YV9rdWJlcm5ldGVzX25vZGVfbmFtZQogICAgICByZWdleDogKC4rKQogICAgICB0YXJnZXRfbGFiZWw6IF9fbWV0cmljc19wYXRoX18KICAgICAgcmVwbGFjZW1lbnQ6IC9hcGkvdjEvbm9kZXMvJHsxfS9wcm94eS9tZXRyaWNzCiAgICAtIHNvdXJjZV9sYWJlbHM6CiAgICAgICAgLSBfX21ldGFfa3ViZXJuZXRlc19ub2RlX25hbWUKICAgICAgYWN0aW9uOiByZXBsYWNlCiAgICAgIHRhcmdldF9sYWJlbDoga3ViZXJuZXRlc19pb19ob3N0bmFtZQogICAgIyBTY3JhcGUgY29uZmlnIGZvciBLdWJlbGV0IGNBZHZpc29yLgogICAgIwogICAgIyBUaGlzIGlzIHJlcXVpcmVkIGZvciBLdWJlcm5ldGVzIDEuNy4zIGFuZCBsYXRlciwgd2hlcmUgY0Fkdmlzb3IgbWV0cmljcwogICAgIyAodGhvc2Ugd2hvc2UgbmFtZXMgYmVnaW4gd2l0aCAnY29udGFpbmVyXycpIGhhdmUgYmVlbiByZW1vdmVkIGZyb20gdGhlCiAgICAjIEt1YmVsZXQgbWV0cmljcyBlbmRwb2ludC4gIFRoaXMgam9iIHNjcmFwZXMgdGhlIGNBZHZpc29yIGVuZHBvaW50IHRvCiAgICAjIHJldHJpZXZlIHRob3NlIG1ldHJpY3MuCiAgICAjCiAgICAjIEluIEt1YmVybmV0ZXMgMS43LjAtMS43LjIsIHRoZXNlIG1ldHJpY3MgYXJlIG9ubHkgZXhwb3NlZCBvbiB0aGUgY0Fkdmlzb3IKICAgICMgSFRUUCBlbmRwb2ludDsgdXNlICJyZXBsYWNlbWVudDogL2FwaS92MS9ub2Rlcy8kezF9OjQxOTQvcHJveHkvbWV0cmljcyIKICAgICMgaW4gdGhhdCBjYXNlIChhbmQgZW5zdXJlIGNBZHZpc29yJ3MgSFRUUCBzZXJ2ZXIgaGFzbid0IGJlZW4gZGlzYWJsZWQgd2l0aAogICAgIyB0aGUgLS1jYWR2aXNvci1wb3J0PTAgS3ViZWxldCBmbGFnKS4KICAgICMKICAgICMgVGhpcyBqb2IgaXMgbm90IG5lY2Vzc2FyeSBhbmQgc2hvdWxkIGJlIHJlbW92ZWQgaW4gS3ViZXJuZXRlcyAxLjYgYW5kCiAgICAjIGVhcmxpZXIgdmVyc2lvbnMsIG9yIGl0IHdpbGwgY2F1c2UgdGhlIG1ldHJpY3MgdG8gYmUgc2NyYXBlZCB0d2ljZS4KICAtIGpvYl9uYW1lOiAna3ViZXJuZXRlcy1jYWR2aXNvcicKCiAgICAjIERlZmF1bHQgdG8gc2NyYXBpbmcgb3ZlciBodHRwcy4gSWYgcmVxdWlyZWQsIGp1c3QgZGlzYWJsZSB0aGlzIG9yIGNoYW5nZSB0bwogICAgIyBgaHR0cGAuCiAgICBzY2hlbWU6IGh0dHBzCgogICAgIyBUaGlzIFRMUyAmIGJlYXJlciB0b2tlbiBmaWxlIGNvbmZpZyBpcyB1c2VkIHRvIGNvbm5lY3QgdG8gdGhlIGFjdHVhbCBzY3JhcGUKICAgICMgZW5kcG9pbnRzIGZvciBjbHVzdGVyIGNvbXBvbmVudHMuIFRoaXMgaXMgc2VwYXJhdGUgdG8gZGlzY292ZXJ5IGF1dGgKICAgICMgY29uZmlndXJhdGlvbiBiZWNhdXNlIGRpc2NvdmVyeSAmIHNjcmFwaW5nIGFyZSB0d28gc2VwYXJhdGUgY29uY2VybnMgaW4KICAgICMgUHJvbWV0aGV1cy4gVGhlIGRpc2NvdmVyeSBhdXRoIGNvbmZpZyBpcyBhdXRvbWF0aWMgaWYgUHJvbWV0aGV1cyBydW5zIGluc2lkZQogICAgIyB0aGUgY2x1c3Rlci4gT3RoZXJ3aXNlLCBtb3JlIGNvbmZpZyBvcHRpb25zIGhhdmUgdG8gYmUgcHJvdmlkZWQgd2l0aGluIHRoZQogICAgIyA8a3ViZXJuZXRlc19zZF9jb25maWc+LgogICAgdGxzX2NvbmZpZzoKICAgICAgY2FfZmlsZTogL3Zhci9ydW4vc2VjcmV0cy9rdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L2NhLmNydAogICAgYmVhcmVyX3Rva2VuX2ZpbGU6IC92YXIvcnVuL3NlY3JldHMva3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC90b2tlbgoKICAgIGt1YmVybmV0ZXNfc2RfY29uZmlnczoKICAgIC0gcm9sZTogbm9kZQoKICAgIHJlbGFiZWxfY29uZmlnczoKICAgIC0gYWN0aW9uOiBsYWJlbG1hcAogICAgICByZWdleDogX19tZXRhX2t1YmVybmV0ZXNfbm9kZV9sYWJlbF8oLispCiAgICAtIHRhcmdldF9sYWJlbDogX19hZGRyZXNzX18KICAgICAgcmVwbGFjZW1lbnQ6IGt1YmVybmV0ZXMuZGVmYXVsdC5zdmM6NDQzCiAgICAtIHNvdXJjZV9sYWJlbHM6CiAgICAgICAgLSBfX21ldGFfa3ViZXJuZXRlc19ub2RlX25hbWUKICAgICAgcmVnZXg6ICguKykKICAgICAgdGFyZ2V0X2xhYmVsOiBfX21ldHJpY3NfcGF0aF9fCiAgICAgIHJlcGxhY2VtZW50OiAvYXBpL3YxL25vZGVzLyR7MX0vcHJveHkvbWV0cmljcy9jYWR2aXNvcgogICAgbWV0cmljX3JlbGFiZWxfY29uZmlnczoKICAgIC0gc291cmNlX2xhYmVsczoKICAgICAgICAtIF9fbmFtZV9fCiAgICAgIHJlZ2V4OiAnY29udGFpbmVyX25ldHdvcmtfdGNwX3VzYWdlX3RvdGFsJwogICAgICBhY3Rpb246IGRyb3AKICAgIC0gc291cmNlX2xhYmVsczoKICAgICAgICAtIF9fbmFtZV9fCiAgICAgIHJlZ2V4OiAnY29udGFpbmVyX3Rhc2tzX3N0YXRlJwogICAgICBhY3Rpb246IGRyb3AKICAgIC0gc291cmNlX2xhYmVsczoKICAgICAgICAtIF9fbmFtZV9fCiAgICAgIHJlZ2V4OiAnY29udGFpbmVyX25ldHdvcmtfdWRwX3VzYWdlX3RvdGFsJwogICAgICBhY3Rpb246IGRyb3AKICAgIC0gc291cmNlX2xhYmVsczoKICAgICAgICAtIF9fbmFtZV9fCiAgICAgIHJlZ2V4OiAnY29udGFpbmVyX21lbW9yeV9mYWlsdXJlc190b3RhbCcKICAgICAgYWN0aW9uOiBkcm9wCiAgICAtIHNvdXJjZV9sYWJlbHM6CiAgICAgICAgLSBfX25hbWVfXwogICAgICByZWdleDogJ2NvbnRhaW5lcl9jcHVfbG9hZF9hdmVyYWdlXzEwcycKICAgICAgYWN0aW9uOiBkcm9wCiAgICAtIHNvdXJjZV9sYWJlbHM6CiAgICAgICAgLSBfX25hbWVfXwogICAgICByZWdleDogJ2NvbnRhaW5lcl9jcHVfc3lzdGVtX3NlY29uZHNfdG90YWwnCiAgICAgIGFjdGlvbjogZHJvcAogICAgLSBzb3VyY2VfbGFiZWxzOgogICAgICAgIC0gX19uYW1lX18KICAgICAgcmVnZXg6ICdjb250YWluZXJfY3B1X3VzZXJfc2Vjb25kc190b3RhbCcKICAgICAgYWN0aW9uOiBkcm9wCiAgICAtIHNvdXJjZV9sYWJlbHM6CiAgICAgICAgLSBfX25hbWVfXwogICAgICByZWdleDogJ2NvbnRhaW5lcl9mc19pbm9kZXNfZnJlZScKICAgICAgYWN0aW9uOiBkcm9wCiAgICAtIHNvdXJjZV9sYWJlbHM6CiAgICAgICAgLSBfX25hbWVfXwogICAgICByZWdleDogJ2NvbnRhaW5lcl9mc19pbm9kZXNfdG90YWwnCiAgICAgIGFjdGlvbjogZHJvcAogICAgLSBzb3VyY2VfbGFiZWxzOgogICAgICAgIC0gX19uYW1lX18KICAgICAgcmVnZXg6ICdjb250YWluZXJfZnNfaW9fY3VycmVudCcKICAgICAgYWN0aW9uOiBkcm9wCiAgICAtIHNvdXJjZV9sYWJlbHM6CiAgICAgICAgLSBfX25hbWVfXwogICAgICByZWdleDogJ2NvbnRhaW5lcl9mc19pb190aW1lX3NlY29uZHNfdG90YWwnCiAgICAgIGFjdGlvbjogZHJvcAogICAgLSBzb3VyY2VfbGFiZWxzOgogICAgICAgIC0gX19uYW1lX18KICAgICAgcmVnZXg6ICdjb250YWluZXJfZnNfaW9fdGltZV93ZWlnaHRlZF9zZWNvbmRzX3RvdGFsJwogICAgICBhY3Rpb246IGRyb3AKICAgIC0gc291cmNlX2xhYmVsczoKICAgICAgICAtIF9fbmFtZV9fCiAgICAgIHJlZ2V4OiAnY29udGFpbmVyX2ZzX3JlYWRfc2Vjb25kc190b3RhbCcKICAgICAgYWN0aW9uOiBkcm9wCiAgICAtIHNvdXJjZV9sYWJlbHM6CiAgICAgICAgLSBfX25hbWVfXwogICAgICByZWdleDogJ2NvbnRhaW5lcl9mc19yZWFkc19tZXJnZWRfdG90YWwnCiAgICAgIGFjdGlvbjogZHJvcAogICAgLSBzb3VyY2VfbGFiZWxzOgogICAgICAgIC0gX19uYW1lX18KICAgICAgcmVnZXg6ICdjb250YWluZXJfZnNfcmVhZHNfbWVyZ2VkX3RvdGFsJwogICAgICBhY3Rpb246IGRyb3AKICAgIC0gc291cmNlX2xhYmVsczoKICAgICAgICAtIF9fbmFtZV9fCiAgICAgIHJlZ2V4OiAnY29udGFpbmVyX2ZzX3JlYWRzX3RvdGFsJwogICAgICBhY3Rpb246IGRyb3AKICAgIC0gc291cmNlX2xhYmVsczoKICAgICAgICAtIF9fbmFtZV9fCiAgICAgIHJlZ2V4OiAnY29udGFpbmVyX2ZzX3NlY3Rvcl9yZWFkc190b3RhbCcKICAgICAgYWN0aW9uOiBkcm9wCiAgICAtIHNvdXJjZV9sYWJlbHM6CiAgICAgICAgLSBfX25hbWVfXwogICAgICByZWdleDogJ2NvbnRhaW5lcl9mc19zZWN0b3Jfd3JpdGVzX3RvdGFsJwogICAgICBhY3Rpb246IGRyb3AKICAgIC0gc291cmNlX2xhYmVsczoKICAgICAgICAtIF9fbmFtZV9fCiAgICAgIHJlZ2V4OiAnY29udGFpbmVyX2ZzX3dyaXRlX3NlY29uZHNfdG90YWwnCiAgICAgIGFjdGlvbjogZHJvcAogICAgLSBzb3VyY2VfbGFiZWxzOgogICAgICAgIC0gX19uYW1lX18KICAgICAgcmVnZXg6ICdjb250YWluZXJfZnNfd3JpdGVzX2J5dGVzX3RvdGFsJwogICAgICBhY3Rpb246IGRyb3AKICAgIC0gc291cmNlX2xhYmVsczoKICAgICAgICAtIF9fbmFtZV9fCiAgICAgIHJlZ2V4OiAnY29udGFpbmVyX2ZzX3dyaXRlc19tZXJnZWRfdG90YWwnCiAgICAgIGFjdGlvbjogZHJvcAogICAgLSBzb3VyY2VfbGFiZWxzOgogICAgICAgIC0gX19uYW1lX18KICAgICAgcmVnZXg6ICdjb250YWluZXJfZnNfd3JpdGVzX3RvdGFsJwogICAgICBhY3Rpb246IGRyb3AKICAgIC0gc291cmNlX2xhYmVsczoKICAgICAgICAtIF9fbmFtZV9fCiAgICAgIHJlZ2V4OiAnY29udGFpbmVyX2xhc3Rfc2VlbicKICAgICAgYWN0aW9uOiBkcm9wCiAgICAtIHNvdXJjZV9sYWJlbHM6CiAgICAgICAgLSBfX25hbWVfXwogICAgICByZWdleDogJ2NvbnRhaW5lcl9tZW1vcnlfY2FjaGUnCiAgICAgIGFjdGlvbjogZHJvcAogICAgLSBzb3VyY2VfbGFiZWxzOgogICAgICAgIC0gX19uYW1lX18KICAgICAgcmVnZXg6ICdjb250YWluZXJfbWVtb3J5X2ZhaWxjbnQnCiAgICAgIGFjdGlvbjogZHJvcAogICAgLSBzb3VyY2VfbGFiZWxzOgogICAgICAgIC0gX19uYW1lX18KICAgICAgcmVnZXg6ICdjb250YWluZXJfbWVtb3J5X21heF91c2FnZV9ieXRlcycKICAgICAgYWN0aW9uOiBkcm9wCiAgICAtIHNvdXJjZV9sYWJlbHM6CiAgICAgICAgLSBfX25hbWVfXwogICAgICByZWdleDogJ2NvbnRhaW5lcl9tZW1vcnlfcnNzJwogICAgICBhY3Rpb246IGRyb3AKICAgIC0gc291cmNlX2xhYmVsczoKICAgICAgICAtIF9fbmFtZV9fCiAgICAgIHJlZ2V4OiAnY29udGFpbmVyX21lbW9yeV9zd2FwJwogICAgICBhY3Rpb246IGRyb3AKICAgIC0gc291cmNlX2xhYmVsczoKICAgICAgICAtIF9fbmFtZV9fCiAgICAgIHJlZ2V4OiAnY29udGFpbmVyX21lbW9yeV91c2FnZV9ieXRlcycKICAgICAgYWN0aW9uOiBkcm9wCiAgICAtIHNvdXJjZV9sYWJlbHM6CiAgICAgICAgLSBfX25hbWVfXwogICAgICByZWdleDogJ2NvbnRhaW5lcl9uZXR3b3JrX3JlY2VpdmVfZXJyb3JzX3RvdGFsJwogICAgICBhY3Rpb246IGRyb3AKICAgIC0gc291cmNlX2xhYmVsczoKICAgICAgICAtIF9fbmFtZV9fCiAgICAgIHJlZ2V4OiAnY29udGFpbmVyX25ldHdvcmtfcmVjZWl2ZV9wYWNrZXRzX2Ryb3BwZWRfdG90YWwnCiAgICAgIGFjdGlvbjogZHJvcAogICAgLSBzb3VyY2VfbGFiZWxzOgogICAgICAgIC0gX19uYW1lX18KICAgICAgcmVnZXg6ICdjb250YWluZXJfbmV0d29ya19yZWNlaXZlX3BhY2tldHNfdG90YWwnCiAgICAgIGFjdGlvbjogZHJvcAogICAgLSBzb3VyY2VfbGFiZWxzOgogICAgICAgIC0gX19uYW1lX18KICAgICAgcmVnZXg6ICdjb250YWluZXJfbmV0d29ya190cmFuc21pdF9lcnJvcnNfdG90YWwnCiAgICAgIGFjdGlvbjogZHJvcAogICAgLSBzb3VyY2VfbGFiZWxzOgogICAgICAgIC0gX19uYW1lX18KICAgICAgcmVnZXg6ICdjb250YWluZXJfbmV0d29ya190cmFuc21pdF9wYWNrZXRzX2Ryb3BwZWRfdG90YWwnCiAgICAgIGFjdGlvbjogZHJvcAogICAgLSBzb3VyY2VfbGFiZWxzOgogICAgICAgIC0gX19uYW1lX18KICAgICAgcmVnZXg6ICdjb250YWluZXJfbmV0d29ya190cmFuc21pdF9wYWNrZXRzX3RvdGFsJwogICAgICBhY3Rpb246IGRyb3AKICAgIC0gc291cmNlX2xhYmVsczoKICAgICAgICAtIF9fbmFtZV9fCiAgICAgIHJlZ2V4OiAnY29udGFpbmVyX3NwZWNfY3B1X3BlcmlvZCcKICAgICAgYWN0aW9uOiBkcm9wCiAgICAtIHNvdXJjZV9sYWJlbHM6CiAgICAgICAgLSBfX25hbWVfXwogICAgICByZWdleDogJ2NvbnRhaW5lcl9zcGVjX2NwdV9zaGFyZXMnCiAgICAgIGFjdGlvbjogZHJvcAogICAgLSBzb3VyY2VfbGFiZWxzOgogICAgICAgIC0gX19uYW1lX18KICAgICAgcmVnZXg6ICdjb250YWluZXJfc3BlY19tZW1vcnlfbGltaXRfYnl0ZXMnCiAgICAgIGFjdGlvbjogZHJvcAogICAgLSBzb3VyY2VfbGFiZWxzOgogICAgICAgIC0gX19uYW1lX18KICAgICAgcmVnZXg6ICdjb250YWluZXJfc3BlY19tZW1vcnlfcmVzZXJ2YXRpb25fbGltaXRfYnl0ZXMnCiAgICAgIGFjdGlvbjogZHJvcAogICAgLSBzb3VyY2VfbGFiZWxzOgogICAgICAgIC0gX19uYW1lX18KICAgICAgcmVnZXg6ICdjb250YWluZXJfc3BlY19tZW1vcnlfc3dhcF9saW1pdF9ieXRlcycKICAgICAgYWN0aW9uOiBkcm9wCiAgICAtIHNvdXJjZV9sYWJlbHM6CiAgICAgICAgLSBfX25hbWVfXwogICAgICByZWdleDogJ2NvbnRhaW5lcl9zdGFydF90aW1lX3NlY29uZHMnCiAgICAgIGFjdGlvbjogZHJvcAogICAgIyBTY3JhcGUgY29uZmlnIGZvciBBUEkgc2VydmVycy4KICAgICMKICAgICMgS3ViZXJuZXRlcyBleHBvc2VzIEFQSSBzZXJ2ZXJzIGFzIGVuZHBvaW50cyB0byB0aGUgZGVmYXVsdC9rdWJlcm5ldGVzCiAgICAjIHNlcnZpY2Ugc28gdGhpcyB1c2VzIGBlbmRwb2ludHNgIHJvbGUgYW5kIHVzZXMgcmVsYWJlbGxpbmcgdG8gb25seSBrZWVwCiAgICAjIHRoZSBlbmRwb2ludHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBkZWZhdWx0L2t1YmVybmV0ZXMgc2VydmljZSB1c2luZyB0aGUKICAgICMgZGVmYXVsdCBuYW1lZCBwb3J0IGBodHRwc2AuIFRoaXMgd29ya3MgZm9yIHNpbmdsZSBBUEkgc2VydmVyIGRlcGxveW1lbnRzIGFzCiAgICAjIHdlbGwgYXMgSEEgQVBJIHNlcnZlciBkZXBsb3ltZW50cy4KICAtIGpvYl9uYW1lOiAnYXBpc2VydmVyJwogICAga3ViZXJuZXRlc19zZF9jb25maWdzOgogICAgLSByb2xlOiBlbmRwb2ludHMKICAgIHNjcmFwZV9pbnRlcnZhbDogNDVzCiAgICAjIERlZmF1bHQgdG8gc2NyYXBpbmcgb3ZlciBodHRwcy4gSWYgcmVxdWlyZWQsIGp1c3QgZGlzYWJsZSB0aGlzIG9yIGNoYW5nZSB0bwogICAgIyBgaHR0cGAuCiAgICBzY2hlbWU6IGh0dHBzCiAgICAjIFRoaXMgVExTICYgYmVhcmVyIHRva2VuIGZpbGUgY29uZmlnIGlzIHVzZWQgdG8gY29ubmVjdCB0byB0aGUgYWN0dWFsIHNjcmFwZQogICAgIyBlbmRwb2ludHMgZm9yIGNsdXN0ZXIgY29tcG9uZW50cy4gVGhpcyBpcyBzZXBhcmF0ZSB0byBkaXNjb3ZlcnkgYXV0aAogICAgIyBjb25maWd1cmF0aW9uIGJlY2F1c2UgZGlzY292ZXJ5ICYgc2NyYXBpbmcgYXJlIHR3byBzZXBhcmF0ZSBjb25jZXJucyBpbgogICAgIyBQcm9tZXRoZXVzLiBUaGUgZGlzY292ZXJ5IGF1dGggY29uZmlnIGlzIGF1dG9tYXRpYyBpZiBQcm9tZXRoZXVzIHJ1bnMgaW5zaWRlCiAgICAjIHRoZSBjbHVzdGVyLiBPdGhlcndpc2UsIG1vcmUgY29uZmlnIG9wdGlvbnMgaGF2ZSB0byBiZSBwcm92aWRlZCB3aXRoaW4gdGhlCiAgICAjIDxrdWJlcm5ldGVzX3NkX2NvbmZpZz4uCiAgICB0bHNfY29uZmlnOgogICAgICBjYV9maWxlOiAvdmFyL3J1bi9zZWNyZXRzL2t1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvY2EuY3J0CiAgICAgICMgSWYgeW91ciBub2RlIGNlcnRpZmljYXRlcyBhcmUgc2VsZi1zaWduZWQgb3IgdXNlIGEgZGlmZmVyZW50IENBIHRvIHRoZQogICAgICAjIG1hc3RlciBDQSwgdGhlbiBkaXNhYmxlIGNlcnRpZmljYXRlIHZlcmlmaWNhdGlvbiBiZWxvdy4gTm90ZSB0aGF0CiAgICAgICMgY2VydGlmaWNhdGUgdmVyaWZpY2F0aW9uIGlzIGFuIGludGVncmFsIHBhcnQgb2YgYSBzZWN1cmUgaW5mcmFzdHJ1Y3R1cmUKICAgICAgIyBzbyB0aGlzIHNob3VsZCBvbmx5IGJlIGRpc2FibGVkIGluIGEgY29udHJvbGxlZCBlbnZpcm9ubWVudC4gWW91IGNhbgogICAgICAjIGRpc2FibGUgY2VydGlmaWNhdGUgdmVyaWZpY2F0aW9uIGJ5IHVuY29tbWVudGluZyB0aGUgbGluZSBiZWxvdy4KICAgICAgIwogICAgICAjIGluc2VjdXJlX3NraXBfdmVyaWZ5OiB0cnVlCiAgICBiZWFyZXJfdG9rZW5fZmlsZTogL3Zhci9ydW4vc2VjcmV0cy9rdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3Rva2VuCiAgICAjIEtlZXAgb25seSB0aGUgZGVmYXVsdC9rdWJlcm5ldGVzIHNlcnZpY2UgZW5kcG9pbnRzIGZvciB0aGUgaHR0cHMgcG9ydC4gVGhpcwogICAgIyB3aWxsIGFkZCB0YXJnZXRzIGZvciBlYWNoIEFQSSBzZXJ2ZXIgd2hpY2ggS3ViZXJuZXRlcyBhZGRzIGFuIGVuZHBvaW50IHRvCiAgICAjIHRoZSBkZWZhdWx0L2t1YmVybmV0ZXMgc2VydmljZS4KICAgIHJlbGFiZWxfY29uZmlnczoKICAgIC0gc291cmNlX2xhYmVsczoKICAgICAgICAtIF9fbWV0YV9rdWJlcm5ldGVzX25hbWVzcGFjZQogICAgICAgIC0gX19tZXRhX2t1YmVybmV0ZXNfc2VydmljZV9uYW1lCiAgICAgICAgLSBfX21ldGFfa3ViZXJuZXRlc19lbmRwb2ludF9wb3J0X25hbWUKICAgICAgYWN0aW9uOiBrZWVwCiAgICAgIHJlZ2V4OiBkZWZhdWx0O2t1YmVybmV0ZXM7aHR0cHMKICAgIG1ldHJpY19yZWxhYmVsX2NvbmZpZ3M6CiAgICAtIHNvdXJjZV9sYWJlbHM6CiAgICAgICAgLSBfX25hbWVfXwogICAgICByZWdleDogJ2FwaXNlcnZlcl9hZG1pc3Npb25fY29udHJvbGxlcl9hZG1pc3Npb25fbGF0ZW5jaWVzX3NlY29uZHNfYnVja2V0JwogICAgICBhY3Rpb246IGRyb3AKICAgIC0gc291cmNlX2xhYmVsczoKICAgICAgICAtIF9fbmFtZV9fCiAgICAgIHJlZ2V4OiAncmVzdF9jbGllbnRfcmVxdWVzdF9sYXRlbmN5X3NlY29uZHNfYnVja2V0JwogICAgICBhY3Rpb246IGRyb3AKICAgIC0gc291cmNlX2xhYmVsczoKICAgICAgICAtIF9fbmFtZV9fCiAgICAgIHJlZ2V4OiAnYXBpc2VydmVyX3Jlc3BvbnNlX3NpemVzX2J1Y2tldCcKICAgICAgYWN0aW9uOiBkcm9wCiAgICAtIHNvdXJjZV9sYWJlbHM6CiAgICAgICAgLSBfX25hbWVfXwogICAgICByZWdleDogJ2FwaXNlcnZlcl9hZG1pc3Npb25fc3RlcF9hZG1pc3Npb25fbGF0ZW5jaWVzX3NlY29uZHNfYnVja2V0JwogICAgICBhY3Rpb246IGRyb3AKICAgIC0gc291cmNlX2xhYmVsczoKICAgICAgICAtIF9fbmFtZV9fCiAgICAgIHJlZ2V4OiAnYXBpc2VydmVyX2FkbWlzc2lvbl9jb250cm9sbGVyX2FkbWlzc2lvbl9sYXRlbmNpZXNfc2Vjb25kc19jb3VudCcKICAgICAgYWN0aW9uOiBkcm9wCiAgICAtIHNvdXJjZV9sYWJlbHM6CiAgICAgICAgLSBfX25hbWVfXwogICAgICByZWdleDogJ2FwaXNlcnZlcl9hZG1pc3Npb25fY29udHJvbGxlcl9hZG1pc3Npb25fbGF0ZW5jaWVzX3NlY29uZHNfc3VtJwogICAgICBhY3Rpb246IGRyb3AKICAgIC0gc291cmNlX2xhYmVsczoKICAgICAgICAtIF9fbmFtZV9fCiAgICAgIHJlZ2V4OiAnYXBpc2VydmVyX3JlcXVlc3RfbGF0ZW5jaWVzX3N1bW1hcnknCiAgICAgIGFjdGlvbjogZHJvcAogICMgU2NyYXBlIGNvbmZpZyBmb3Igc2VydmljZSBlbmRwb2ludHMuCiAgIwogICMgVGhlIHJlbGFiZWxpbmcgYWxsb3dzIHRoZSBhY3R1YWwgc2VydmljZSBzY3JhcGUgZW5kcG9pbnQgdG8gYmUgY29uZmlndXJlZAogICMgdmlhIHRoZSBmb2xsb3dpbmcgYW5ub3RhdGlvbnM6CiAgIwogICMgKiBgcHJvbWV0aGV1cy5pby9zY3JhcGVgOiBPbmx5IHNjcmFwZSBzZXJ2aWNlcyB0aGF0IGhhdmUgYSB2YWx1ZSBvZiBgdHJ1ZWAKICAjICogYHByb21ldGhldXMuaW8vc2NoZW1lYDogSWYgdGhlIG1ldHJpY3MgZW5kcG9pbnQgaXMgc2VjdXJlZCB0aGVuIHlvdSB3aWxsIG5lZWQKICAjIHRvIHNldCB0aGlzIHRvIGBodHRwc2AgJiBtb3N0IGxpa2VseSBzZXQgdGhlIGB0bHNfY29uZmlnYCBvZiB0aGUgc2NyYXBlIGNvbmZpZy4KICAjICogYHByb21ldGhldXMuaW8vcGF0aGA6IElmIHRoZSBtZXRyaWNzIHBhdGggaXMgbm90IGAvbWV0cmljc2Agb3ZlcnJpZGUgdGhpcy4KICAjICogYHByb21ldGhldXMuaW8vcG9ydGA6IElmIHRoZSBtZXRyaWNzIGFyZSBleHBvc2VkIG9uIGEgZGlmZmVyZW50IHBvcnQgdG8gdGhlCiAgIyBzZXJ2aWNlIHRoZW4gc2V0IHRoaXMgYXBwcm9wcmlhdGVseS4KICAtIGpvYl9uYW1lOiAnb3BlbnN0YWNrLWV4cG9ydGVyJwogICAga3ViZXJuZXRlc19zZF9jb25maWdzOgogICAgLSByb2xlOiBlbmRwb2ludHMKICAgIHNjcmFwZV9pbnRlcnZhbDogNjBzCiAgICByZWxhYmVsX2NvbmZpZ3M6CiAgICAtIHNvdXJjZV9sYWJlbHM6CiAgICAgICAgLSBfX21ldGFfa3ViZXJuZXRlc19zZXJ2aWNlX25hbWUKICAgICAgYWN0aW9uOiBrZWVwCiAgICAgIHJlZ2V4OiAib3BlbnN0YWNrLW1ldHJpY3MiCiAgICAtIHNvdXJjZV9sYWJlbHM6CiAgICAgICAgLSBfX21ldGFfa3ViZXJuZXRlc19zZXJ2aWNlX2Fubm90YXRpb25fcHJvbWV0aGV1c19pb19zY3JhcGUKICAgICAgYWN0aW9uOiBrZWVwCiAgICAgIHJlZ2V4OiB0cnVlCiAgICAtIHNvdXJjZV9sYWJlbHM6CiAgICAgICAgLSBfX21ldGFfa3ViZXJuZXRlc19zZXJ2aWNlX2Fubm90YXRpb25fcHJvbWV0aGV1c19pb19zY2hlbWUKICAgICAgYWN0aW9uOiByZXBsYWNlCiAgICAgIHRhcmdldF9sYWJlbDogX19zY2hlbWVfXwogICAgICByZWdleDogKGh0dHBzPykKICAgIC0gc291cmNlX2xhYmVsczoKICAgICAgICAtIF9fbWV0YV9rdWJlcm5ldGVzX3NlcnZpY2VfYW5ub3RhdGlvbl9wcm9tZXRoZXVzX2lvX3BhdGgKICAgICAgYWN0aW9uOiByZXBsYWNlCiAgICAgIHRhcmdldF9sYWJlbDogX19tZXRyaWNzX3BhdGhfXwogICAgICByZWdleDogKC4rKQogICAgLSBzb3VyY2VfbGFiZWxzOgogICAgICAgIC0gX19hZGRyZXNzX18KICAgICAgICAtIF9fbWV0YV9rdWJlcm5ldGVzX3NlcnZpY2VfYW5ub3RhdGlvbl9wcm9tZXRoZXVzX2lvX3BvcnQKICAgICAgYWN0aW9uOiByZXBsYWNlCiAgICAgIHRhcmdldF9sYWJlbDogX19hZGRyZXNzX18KICAgICAgcmVnZXg6IChbXjpdKykoPzo6XGQrKT87KFxkKykKICAgICAgcmVwbGFjZW1lbnQ6ICQxOiQyCiAgICAtIGFjdGlvbjogbGFiZWxtYXAKICAgICAgcmVnZXg6IF9fbWV0YV9rdWJlcm5ldGVzX3NlcnZpY2VfbGFiZWxfKC4rKQogICAgLSBzb3VyY2VfbGFiZWxzOgogICAgICAgIC0gX19tZXRhX2t1YmVybmV0ZXNfbmFtZXNwYWNlCiAgICAgIGFjdGlvbjogcmVwbGFjZQogICAgICB0YXJnZXRfbGFiZWw6IGt1YmVybmV0ZXNfbmFtZXNwYWNlCiAgICAtIHNvdXJjZV9sYWJlbHM6CiAgICAgICAgLSBfX21ldGFfa3ViZXJuZXRlc19zZXJ2aWNlX25hbWUKICAgICAgYWN0aW9uOiByZXBsYWNlCiAgICAgIHRhcmdldF9sYWJlbDogaW5zdGFuY2UKICAgIC0gc291cmNlX2xhYmVsczoKICAgICAgICAtIF9fbWV0YV9rdWJlcm5ldGVzX3NlcnZpY2VfbmFtZQogICAgICBhY3Rpb246IHJlcGxhY2UKICAgICAgdGFyZ2V0X2xhYmVsOiBrdWJlcm5ldGVzX25hbWUKICAgIC0gc291cmNlX2xhYmVsczoKICAgICAgICAtIF9fbWV0YV9rdWJlcm5ldGVzX3NlcnZpY2VfbmFtZQogICAgICB0YXJnZXRfbGFiZWw6IGpvYgogICAgICByZXBsYWNlbWVudDogJHsxfQogIC0gam9iX25hbWU6ICdub2RlLWV4cG9ydGVyJwogICAga3ViZXJuZXRlc19zZF9jb25maWdzOgogICAgLSByb2xlOiBlbmRwb2ludHMKICAgIHNjcmFwZV9pbnRlcnZhbDogNjBzCiAgICByZWxhYmVsX2NvbmZpZ3M6CiAgICAtIHNvdXJjZV9sYWJlbHM6CiAgICAgICAgLSBfX21ldGFfa3ViZXJuZXRlc19zZXJ2aWNlX25hbWUKICAgICAgYWN0aW9uOiBrZWVwCiAgICAgIHJlZ2V4OiAnbm9kZS1leHBvcnRlcicKICAgIC0gc291cmNlX2xhYmVsczoKICAgICAgICAtIF9fbWV0YV9rdWJlcm5ldGVzX3BvZF9ub2RlX25hbWUKICAgICAgYWN0aW9uOiByZXBsYWNlCiAgICAgIHRhcmdldF9sYWJlbDogaG9zdG5hbWUKICAtIGpvYl9uYW1lOiAna3ViZXJuZXRlcy1zZXJ2aWNlLWVuZHBvaW50cycKICAgIGt1YmVybmV0ZXNfc2RfY29uZmlnczoKICAgIC0gcm9sZTogZW5kcG9pbnRzCiAgICBzY3JhcGVfaW50ZXJ2YWw6IDYwcwogICAgcmVsYWJlbF9jb25maWdzOgogICAgLSBzb3VyY2VfbGFiZWxzOgogICAgICAgIC0gX19tZXRhX2t1YmVybmV0ZXNfc2VydmljZV9uYW1lCiAgICAgIGFjdGlvbjogZHJvcAogICAgICByZWdleDogJyhvcGVuc3RhY2stbWV0cmljc3xwcm9tLW1ldHJpY3N8Y2VwaC1tZ3J8bm9kZS1leHBvcnRlciknCiAgICAtIHNvdXJjZV9sYWJlbHM6CiAgICAgICAgLSBfX21ldGFfa3ViZXJuZXRlc19zZXJ2aWNlX2Fubm90YXRpb25fcHJvbWV0aGV1c19pb19zY3JhcGUKICAgICAgYWN0aW9uOiBrZWVwCiAgICAgIHJlZ2V4OiB0cnVlCiAgICAtIHNvdXJjZV9sYWJlbHM6CiAgICAgICAgLSBfX21ldGFfa3ViZXJuZXRlc19zZXJ2aWNlX2Fubm90YXRpb25fcHJvbWV0aGV1c19pb19zY2hlbWUKICAgICAgYWN0aW9uOiByZXBsYWNlCiAgICAgIHRhcmdldF9sYWJlbDogX19zY2hlbWVfXwogICAgICByZWdleDogKGh0dHBzPykKICAgIC0gc291cmNlX2xhYmVsczoKICAgICAgICAtIF9fbWV0YV9rdWJlcm5ldGVzX3NlcnZpY2VfYW5ub3RhdGlvbl9wcm9tZXRoZXVzX2lvX3BhdGgKICAgICAgYWN0aW9uOiByZXBsYWNlCiAgICAgIHRhcmdldF9sYWJlbDogX19tZXRyaWNzX3BhdGhfXwogICAgICByZWdleDogKC4rKQogICAgLSBzb3VyY2VfbGFiZWxzOgogICAgICAgIC0gX19hZGRyZXNzX18KICAgICAgICAtIF9fbWV0YV9rdWJlcm5ldGVzX3NlcnZpY2VfYW5ub3RhdGlvbl9wcm9tZXRoZXVzX2lvX3BvcnQKICAgICAgYWN0aW9uOiByZXBsYWNlCiAgICAgIHRhcmdldF9sYWJlbDogX19hZGRyZXNzX18KICAgICAgcmVnZXg6IChbXjpdKykoPzo6XGQrKT87KFxkKykKICAgICAgcmVwbGFjZW1lbnQ6ICQxOiQyCiAgICAtIGFjdGlvbjogbGFiZWxtYXAKICAgICAgcmVnZXg6IF9fbWV0YV9rdWJlcm5ldGVzX3NlcnZpY2VfbGFiZWxfKC4rKQogICAgLSBzb3VyY2VfbGFiZWxzOgogICAgICAgIC0gX19tZXRhX2t1YmVybmV0ZXNfbmFtZXNwYWNlCiAgICAgIGFjdGlvbjogcmVwbGFjZQogICAgICB0YXJnZXRfbGFiZWw6IGt1YmVybmV0ZXNfbmFtZXNwYWNlCiAgICAtIHNvdXJjZV9sYWJlbHM6CiAgICAgICAgLSBfX21ldGFfa3ViZXJuZXRlc19zZXJ2aWNlX25hbWUKICAgICAgYWN0aW9uOiByZXBsYWNlCiAgICAgIHRhcmdldF9sYWJlbDoga3ViZXJuZXRlc19uYW1lCiAgICAtIHNvdXJjZV9sYWJlbHM6CiAgICAgICAgLSBfX21ldGFfa3ViZXJuZXRlc19zZXJ2aWNlX25hbWUKICAgICAgdGFyZ2V0X2xhYmVsOiBqb2IKICAgICAgcmVwbGFjZW1lbnQ6ICR7MX0KICAjIEV4YW1wbGUgc2NyYXBlIGNvbmZpZyBmb3IgcG9kcwogICMKICAjIFRoZSByZWxhYmVsaW5nIGFsbG93cyB0aGUgYWN0dWFsIHBvZCBzY3JhcGUgZW5kcG9pbnQgdG8gYmUgY29uZmlndXJlZCB2aWEgdGhlCiAgIyBmb2xsb3dpbmcgYW5ub3RhdGlvbnM6CiAgIwogICMgKiBgcHJvbWV0aGV1cy5pby9zY3JhcGVgOiBPbmx5IHNjcmFwZSBwb2RzIHRoYXQgaGF2ZSBhIHZhbHVlIG9mIGB0cnVlYAogICMgKiBgcHJvbWV0aGV1cy5pby9wYXRoYDogSWYgdGhlIG1ldHJpY3MgcGF0aCBpcyBub3QgYC9tZXRyaWNzYCBvdmVycmlkZSB0aGlzLgogICMgKiBgcHJvbWV0aGV1cy5pby9wb3J0YDogU2NyYXBlIHRoZSBwb2Qgb24gdGhlIGluZGljYXRlZCBwb3J0IGluc3RlYWQgb2YgdGhlCiAgIyBwb2QncyBkZWNsYXJlZCBwb3J0cyAoZGVmYXVsdCBpcyBhIHBvcnQtZnJlZSB0YXJnZXQgaWYgbm9uZSBhcmUgZGVjbGFyZWQpLgogIC0gam9iX25hbWU6ICdrdWJlcm5ldGVzLXBvZHMnCiAgICBrdWJlcm5ldGVzX3NkX2NvbmZpZ3M6CiAgICAtIHJvbGU6IHBvZAogICAgcmVsYWJlbF9jb25maWdzOgogICAgLSBzb3VyY2VfbGFiZWxzOiBbX19tZXRhX2t1YmVybmV0ZXNfcG9kX2Fubm90YXRpb25fcHJvbWV0aGV1c19pb19zY3JhcGVdCiAgICAgIGFjdGlvbjoga2VlcAogICAgICByZWdleDogdHJ1ZQogICAgLSBzb3VyY2VfbGFiZWxzOiBbX19tZXRhX2t1YmVybmV0ZXNfcG9kX2Fubm90YXRpb25fcHJvbWV0aGV1c19pb19wYXRoXQogICAgICBhY3Rpb246IHJlcGxhY2UKICAgICAgdGFyZ2V0X2xhYmVsOiBfX21ldHJpY3NfcGF0aF9fCiAgICAgIHJlZ2V4OiAoLispCiAgICAtIHNvdXJjZV9sYWJlbHM6IFtfX2FkZHJlc3NfXywgX19tZXRhX2t1YmVybmV0ZXNfcG9kX2Fubm90YXRpb25fcHJvbWV0aGV1c19pb19wb3J0XQogICAgICBhY3Rpb246IHJlcGxhY2UKICAgICAgcmVnZXg6IChbXjpdKykoPzo6XGQrKT87KFxkKykKICAgICAgcmVwbGFjZW1lbnQ6ICQxOiQyCiAgICAgIHRhcmdldF9sYWJlbDogX19hZGRyZXNzX18KICAgIC0gYWN0aW9uOiBsYWJlbG1hcAogICAgICByZWdleDogX19tZXRhX2t1YmVybmV0ZXNfcG9kX2xhYmVsXyguKykKICAgIC0gc291cmNlX2xhYmVsczogW19fbWV0YV9rdWJlcm5ldGVzX25hbWVzcGFjZV0KICAgICAgYWN0aW9uOiByZXBsYWNlCiAgICAgIHRhcmdldF9sYWJlbDoga3ViZXJuZXRlc19uYW1lc3BhY2UKICAgIC0gc291cmNlX2xhYmVsczogW19fbWV0YV9rdWJlcm5ldGVzX3BvZF9uYW1lXQogICAgICBhY3Rpb246IHJlcGxhY2UKICAgICAgdGFyZ2V0X2xhYmVsOiBrdWJlcm5ldGVzX3BvZF9uYW1lCiAgLSBqb2JfbmFtZTogY2FsaWNvLWV0Y2QKICAgIGt1YmVybmV0ZXNfc2RfY29uZmlnczoKICAgIC0gcm9sZTogc2VydmljZQogICAgc2NyYXBlX2ludGVydmFsOiAyMHMKICAgIHJlbGFiZWxfY29uZmlnczoKICAgIC0gYWN0aW9uOiBsYWJlbG1hcAogICAgICByZWdleDogX19tZXRhX2t1YmVybmV0ZXNfc2VydmljZV9sYWJlbF8oLispCiAgICAtIGFjdGlvbjoga2VlcAogICAgICBzb3VyY2VfbGFiZWxzOgogICAgICAgIC0gX19tZXRhX2t1YmVybmV0ZXNfc2VydmljZV9uYW1lCiAgICAgIHJlZ2V4OiAiY2FsaWNvLWV0Y2QiCiAgICAtIGFjdGlvbjoga2VlcAogICAgICBzb3VyY2VfbGFiZWxzOgogICAgICAgIC0gX19tZXRhX2t1YmVybmV0ZXNfbmFtZXNwYWNlCiAgICAgIHJlZ2V4OiBrdWJlLXN5c3RlbQogICAgICB0YXJnZXRfbGFiZWw6IG5hbWVzcGFjZQogICAgLSBzb3VyY2VfbGFiZWxzOgogICAgICAgIC0gX19tZXRhX2t1YmVybmV0ZXNfcG9kX25hbWUKICAgICAgdGFyZ2V0X2xhYmVsOiBwb2QKICAgIC0gc291cmNlX2xhYmVsczoKICAgICAgICAtIF9fbWV0YV9rdWJlcm5ldGVzX3NlcnZpY2VfbmFtZQogICAgICB0YXJnZXRfbGFiZWw6IHNlcnZpY2UKICAgIC0gc291cmNlX2xhYmVsczoKICAgICAgICAtIF9fbWV0YV9rdWJlcm5ldGVzX3NlcnZpY2VfbmFtZQogICAgICB0YXJnZXRfbGFiZWw6IGpvYgogICAgICByZXBsYWNlbWVudDogJHsxfQogICAgLSBzb3VyY2VfbGFiZWxzOgogICAgICAgIC0gX19tZXRhX2t1YmVybmV0ZXNfc2VydmljZV9sYWJlbAogICAgICB0YXJnZXRfbGFiZWw6IGpvYgogICAgICByZWdleDogY2FsaWNvLWV0Y2QKICAgICAgcmVwbGFjZW1lbnQ6ICR7MX0KICAgIC0gdGFyZ2V0X2xhYmVsOiBlbmRwb2ludAogICAgICByZXBsYWNlbWVudDogImNhbGljby1ldGNkIgogIC0gam9iX25hbWU6IGNlcGgtbWdyCiAgICBrdWJlcm5ldGVzX3NkX2NvbmZpZ3M6CiAgICAtIHJvbGU6IHNlcnZpY2UKICAgIHNjcmFwZV9pbnRlcnZhbDogMjBzCiAgICByZWxhYmVsX2NvbmZpZ3M6CiAgICAtIGFjdGlvbjogbGFiZWxtYXAKICAgICAgcmVnZXg6IF9fbWV0YV9rdWJlcm5ldGVzX3NlcnZpY2VfbGFiZWxfKC4rKQogICAgLSBhY3Rpb246IGtlZXAKICAgICAgc291cmNlX2xhYmVsczoKICAgICAgICAtIF9fbWV0YV9rdWJlcm5ldGVzX3NlcnZpY2VfbmFtZQogICAgICByZWdleDogImNlcGgtbWdyIgogICAgLSBzb3VyY2VfbGFiZWxzOgogICAgICAgIC0gX19tZXRhX2t1YmVybmV0ZXNfc2VydmljZV9wb3J0X25hbWUKICAgICAgYWN0aW9uOiBkcm9wCiAgICAgIHJlZ2V4OiAnY2VwaC1tZ3InCiAgICAtIGFjdGlvbjoga2VlcAogICAgICBzb3VyY2VfbGFiZWxzOgogICAgICAgIC0gX19tZXRhX2t1YmVybmV0ZXNfbmFtZXNwYWNlCiAgICAgIHJlZ2V4OiBjZXBoCiAgICAgIHRhcmdldF9sYWJlbDogbmFtZXNwYWNlCiAgICAtIHNvdXJjZV9sYWJlbHM6CiAgICAgICAgLSBfX21ldGFfa3ViZXJuZXRlc19wb2RfbmFtZQogICAgICB0YXJnZXRfbGFiZWw6IHBvZAogICAgLSBzb3VyY2VfbGFiZWxzOgogICAgICAgIC0gX19tZXRhX2t1YmVybmV0ZXNfc2VydmljZV9uYW1lCiAgICAgIHRhcmdldF9sYWJlbDogc2VydmljZQogICAgLSBzb3VyY2VfbGFiZWxzOgogICAgICAgIC0gX19tZXRhX2t1YmVybmV0ZXNfc2VydmljZV9uYW1lCiAgICAgIHRhcmdldF9sYWJlbDogam9iCiAgICAgIHJlcGxhY2VtZW50OiAkezF9CiAgICAtIHNvdXJjZV9sYWJlbHM6CiAgICAgICAgLSBfX21ldGFfa3ViZXJuZXRlc19zZXJ2aWNlX2xhYmVsCiAgICAgIHRhcmdldF9sYWJlbDogam9iCiAgICAgIHJlZ2V4OiBjZXBoLW1ncgogICAgICByZXBsYWNlbWVudDogJHsxfQogICAgLSB0YXJnZXRfbGFiZWw6IGVuZHBvaW50CiAgICAgIHJlcGxhY2VtZW50OiAiY2VwaC1tZ3IiCmFsZXJ0aW5nOgogIGFsZXJ0bWFuYWdlcnM6CiAgLSBrdWJlcm5ldGVzX3NkX2NvbmZpZ3M6CiAgICAgIC0gcm9sZTogcG9kCiAgICB0bHNfY29uZmlnOgogICAgICBjYV9maWxlOiAvdmFyL3J1bi9zZWNyZXRzL2t1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvY2EuY3J0CiAgICBiZWFyZXJfdG9rZW5fZmlsZTogL3Zhci9ydW4vc2VjcmV0cy9rdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3Rva2VuCiAgICByZWxhYmVsX2NvbmZpZ3M6CiAgICAtIHNvdXJjZV9sYWJlbHM6IFtfX21ldGFfa3ViZXJuZXRlc19wb2RfbGFiZWxfYXBwbGljYXRpb25dCiAgICAgIHJlZ2V4OiBwcm9tZXRoZXVzLWFsZXJ0bWFuYWdlcgogICAgICBhY3Rpb246IGtlZXAKICAgIC0gc291cmNlX2xhYmVsczogW19fbWV0YV9rdWJlcm5ldGVzX3BvZF9jb250YWluZXJfcG9ydF9uYW1lXQogICAgICByZWdleDogYWxlcnRzLWFwaQogICAgICBhY3Rpb246IGtlZXAKICAgIC0gc291cmNlX2xhYmVsczogW19fbWV0YV9rdWJlcm5ldGVzX3BvZF9jb250YWluZXJfcG9ydF9uYW1lXQogICAgICByZWdleDogcGVlci1tZXNoCiAgICAgIGFjdGlvbjogZHJvcA==
  httpd.conf: U2VydmVyUm9vdCAiL3Vzci9sb2NhbC9hcGFjaGUyIgoKTGlzdGVuIDgwCgpMb2FkTW9kdWxlIG1wbV9ldmVudF9tb2R1bGUgbW9kdWxlcy9tb2RfbXBtX2V2ZW50LnNvCkxvYWRNb2R1bGUgYXV0aG5fZmlsZV9tb2R1bGUgbW9kdWxlcy9tb2RfYXV0aG5fZmlsZS5zbwpMb2FkTW9kdWxlIGF1dGhuX2NvcmVfbW9kdWxlIG1vZHVsZXMvbW9kX2F1dGhuX2NvcmUuc28KTG9hZE1vZHVsZSBhdXRoel9ob3N0X21vZHVsZSBtb2R1bGVzL21vZF9hdXRoel9ob3N0LnNvCkxvYWRNb2R1bGUgYXV0aHpfZ3JvdXBmaWxlX21vZHVsZSBtb2R1bGVzL21vZF9hdXRoel9ncm91cGZpbGUuc28KTG9hZE1vZHVsZSBhdXRoel91c2VyX21vZHVsZSBtb2R1bGVzL21vZF9hdXRoel91c2VyLnNvCkxvYWRNb2R1bGUgYXV0aHpfY29yZV9tb2R1bGUgbW9kdWxlcy9tb2RfYXV0aHpfY29yZS5zbwpMb2FkTW9kdWxlIGFjY2Vzc19jb21wYXRfbW9kdWxlIG1vZHVsZXMvbW9kX2FjY2Vzc19jb21wYXQuc28KTG9hZE1vZHVsZSBhdXRoX2Jhc2ljX21vZHVsZSBtb2R1bGVzL21vZF9hdXRoX2Jhc2ljLnNvCkxvYWRNb2R1bGUgbGRhcF9tb2R1bGUgbW9kdWxlcy9tb2RfbGRhcC5zbwpMb2FkTW9kdWxlIGF1dGhuel9sZGFwX21vZHVsZSBtb2R1bGVzL21vZF9hdXRobnpfbGRhcC5zbwpMb2FkTW9kdWxlIHJlcXRpbWVvdXRfbW9kdWxlIG1vZHVsZXMvbW9kX3JlcXRpbWVvdXQuc28KTG9hZE1vZHVsZSBmaWx0ZXJfbW9kdWxlIG1vZHVsZXMvbW9kX2ZpbHRlci5zbwpMb2FkTW9kdWxlIHByb3h5X2h0bWxfbW9kdWxlIG1vZHVsZXMvbW9kX3Byb3h5X2h0bWwuc28KTG9hZE1vZHVsZSBsb2dfY29uZmlnX21vZHVsZSBtb2R1bGVzL21vZF9sb2dfY29uZmlnLnNvCkxvYWRNb2R1bGUgZW52X21vZHVsZSBtb2R1bGVzL21vZF9lbnYuc28KTG9hZE1vZHVsZSBoZWFkZXJzX21vZHVsZSBtb2R1bGVzL21vZF9oZWFkZXJzLnNvCkxvYWRNb2R1bGUgc2V0ZW52aWZfbW9kdWxlIG1vZHVsZXMvbW9kX3NldGVudmlmLnNvCkxvYWRNb2R1bGUgdmVyc2lvbl9tb2R1bGUgbW9kdWxlcy9tb2RfdmVyc2lvbi5zbwpMb2FkTW9kdWxlIHByb3h5X21vZHVsZSBtb2R1bGVzL21vZF9wcm94eS5zbwpMb2FkTW9kdWxlIHByb3h5X2Nvbm5lY3RfbW9kdWxlIG1vZHVsZXMvbW9kX3Byb3h5X2Nvbm5lY3Quc28KTG9hZE1vZHVsZSBwcm94eV9odHRwX21vZHVsZSBtb2R1bGVzL21vZF9wcm94eV9odHRwLnNvCkxvYWRNb2R1bGUgcHJveHlfYmFsYW5jZXJfbW9kdWxlIG1vZHVsZXMvbW9kX3Byb3h5X2JhbGFuY2VyLnNvCkxvYWRNb2R1bGUgc2xvdG1lbV9zaG1fbW9kdWxlIG1vZHVsZXMvbW9kX3Nsb3RtZW1fc2htLnNvCkxvYWRNb2R1bGUgc2xvdG1lbV9wbGFpbl9tb2R1bGUgbW9kdWxlcy9tb2Rfc2xvdG1lbV9wbGFpbi5zbwpMb2FkTW9kdWxlIHVuaXhkX21vZHVsZSBtb2R1bGVzL21vZF91bml4ZC5zbwpMb2FkTW9kdWxlIHN0YXR1c19tb2R1bGUgbW9kdWxlcy9tb2Rfc3RhdHVzLnNvCkxvYWRNb2R1bGUgYXV0b2luZGV4X21vZHVsZSBtb2R1bGVzL21vZF9hdXRvaW5kZXguc28KCjxJZk1vZHVsZSB1bml4ZF9tb2R1bGU+ClVzZXIgZGFlbW9uCkdyb3VwIGRhZW1vbgo8L0lmTW9kdWxlPgoKPERpcmVjdG9yeSAvPgogICAgQWxsb3dPdmVycmlkZSBub25lCiAgICBSZXF1aXJlIGFsbCBkZW5pZWQKPC9EaXJlY3Rvcnk+Cgo8RmlsZXMgIi5odCoiPgogICAgUmVxdWlyZSBhbGwgZGVuaWVkCjwvRmlsZXM+CgpFcnJvckxvZyAvZGV2L3N0ZGVycgoKTG9nTGV2ZWwgd2FybgoKPElmTW9kdWxlIGxvZ19jb25maWdfbW9kdWxlPgogICAgTG9nRm9ybWF0ICIlYSAlbCAldSAldCBcIiVyXCIgJT5zICViIFwiJXtSZWZlcmVyfWlcIiBcIiV7VXNlci1BZ2VudH1pXCIiIGNvbWJpbmVkCiAgICBMb2dGb3JtYXQgIiV7WC1Gb3J3YXJkZWQtRm9yfWkgJWwgJXUgJXQgXCIlclwiICU+cyAlYiBcIiV7UmVmZXJlcn1pXCIgXCIle1VzZXItQWdlbnR9aVwiIiBwcm94eQogICAgTG9nRm9ybWF0ICIlaCAlbCAldSAldCBcIiVyXCIgJT5zICViIiBjb21tb24KCiAgICA8SWZNb2R1bGUgbG9naW9fbW9kdWxlPgogICAgICBMb2dGb3JtYXQgIiVhICVsICV1ICV0IFwiJXJcIiAlPnMgJWIgXCIle1JlZmVyZXJ9aVwiIFwiJXtVc2VyLUFnZW50fWlcIiAlSSAlTyIgY29tYmluZWRpbwogICAgPC9JZk1vZHVsZT4KCiAgICBTZXRFbnZJZiBYLUZvcndhcmRlZC1Gb3IgIl4uKlwuLipcLi4qXC4uKiIgZm9yd2FyZGVkCiAgICBDdXN0b21Mb2cgL2Rldi9zdGRvdXQgY29tbW9uCiAgICBDdXN0b21Mb2cgL2Rldi9zdGRvdXQgY29tYmluZWQKICAgIEN1c3RvbUxvZyAvZGV2L3N0ZG91dCBwcm94eSBlbnY9Zm9yd2FyZGVkCjwvSWZNb2R1bGU+Cgo8RGlyZWN0b3J5ICIvdXNyL2xvY2FsL2FwYWNoZTIvY2dpLWJpbiI+CiAgICBBbGxvd092ZXJyaWRlIE5vbmUKICAgIE9wdGlvbnMgTm9uZQogICAgUmVxdWlyZSBhbGwgZ3JhbnRlZAo8L0RpcmVjdG9yeT4KCjxJZk1vZHVsZSBoZWFkZXJzX21vZHVsZT4KICAgIFJlcXVlc3RIZWFkZXIgdW5zZXQgUHJveHkgZWFybHkKPC9JZk1vZHVsZT4KCjxJZk1vZHVsZSBwcm94eV9odG1sX21vZHVsZT4KSW5jbHVkZSBjb25mL2V4dHJhL3Byb3h5LWh0bWwuY29uZgo8L0lmTW9kdWxlPgoKPFZpcnR1YWxIb3N0ICo6ODA+CiAgIyBFeHBvc2UgbWV0cmljcyB0byBhbGwgdXNlcnMsIGFzIHRoaXMgaXMgbm90IHNlbnNpdGl2ZSBpbmZvcm1hdGlvbiBhbmQKICAjIGNpcmN1bXZlbnRzIHRoZSBpbmFiaWxpdHkgb2YgUHJvbWV0aGV1cyB0byBpbnRlcnBvbGF0ZSBlbnZpcm9ubWVudCB2YXJzCiAgIyBpbiBpdHMgY29uZmlndXJhdGlvbiBmaWxlCiAgPExvY2F0aW9uIC9tZXRyaWNzPgogICAgICBQcm94eVBhc3MgaHR0cDovL2xvY2FsaG9zdDo5MDkwL21ldHJpY3MKICAgICAgUHJveHlQYXNzUmV2ZXJzZSBodHRwOi8vbG9jYWxob3N0OjkwOTAvbWV0cmljcwogICAgICBTYXRpc2Z5IEFueQogICAgICBBbGxvdyBmcm9tIGFsbAogIDwvTG9jYXRpb24+CiAgIyBFeHBvc2UgdGhlIC9mZWRlcmF0ZSBlbmRwb2ludCB0byBhbGwgdXNlcnMsIGFzIHRoaXMgaXMgYWxzbyBub3QKICAjIHNlbnNpdGl2ZSBpbmZvcm1hdGlvbiBhbmQgY2lyY3VtdmVudHMgdGhlIGluYWJpbGl0eSBvZiBQcm9tZXRoZXVzIHRvCiAgIyBpbnRlcnBvbGF0ZSBlbnZpcm9ubWVudCB2YXJzIGluIGl0cyBjb25maWd1cmF0aW9uIGZpbGUKICA8TG9jYXRpb24gL2ZlZGVyYXRlPgogICAgICBQcm94eVBhc3MgaHR0cDovL2xvY2FsaG9zdDo5MDkwL21ldHJpY3MKICAgICAgUHJveHlQYXNzUmV2ZXJzZSBodHRwOi8vbG9jYWxob3N0OjkwOTAvbWV0cmljcwogICAgICBTYXRpc2Z5IEFueQogICAgICBBbGxvdyBmcm9tIGFsbAogIDwvTG9jYXRpb24+CiAgIyBSZXN0cmljdCBnZW5lcmFsIHVzZXIgKExEQVApIGFjY2VzcyB0byB0aGUgL2dyYXBoIGVuZHBvaW50LCBhcyBnZW5lcmFsIHRydXN0ZWQKICAjIHVzZXJzIHNob3VsZCBvbmx5IGJlIGFibGUgdG8gcXVlcnkgUHJvbWV0aGV1cyBmb3IgbWV0cmljcyBhbmQgbm90IGhhdmUgYWNjZXNzCiAgIyB0byBpbmZvcm1hdGlvbiBsaWtlIHRhcmdldHMsIGNvbmZpZ3VyYXRpb24sIGZsYWdzIG9yIGJ1aWxkIGluZm8gZm9yIFByb21ldGhldXMKICA8TG9jYXRpb24gLz4KICAgICAgUHJveHlQYXNzIGh0dHA6Ly9sb2NhbGhvc3Q6OTA5MC8KICAgICAgUHJveHlQYXNzUmV2ZXJzZSBodHRwOi8vbG9jYWxob3N0OjkwOTAvCiAgICAgIEF1dGhOYW1lICJQcm9tZXRoZXVzIgogICAgICBBdXRoVHlwZSBCYXNpYwogICAgICBBdXRoQmFzaWNQcm92aWRlciBmaWxlIGxkYXAKICAgICAgQXV0aFVzZXJGaWxlIC91c3IvbG9jYWwvYXBhY2hlMi9jb25mLy5odHBhc3N3ZAogICAgICBBdXRoTERBUEJpbmRETiBjbj1hZG1pbixkYz1jbHVzdGVyLGRjPWxvY2FsCiAgICAgIEF1dGhMREFQQmluZFBhc3N3b3JkIHBhc3N3b3JkCiAgICAgIEF1dGhMREFQVVJMICJsZGFwOi8vbGRhcC5kZWZhdWx0LnN2Yy5jbHVzdGVyLmxvY2FsOjM4OS9vdT1QZW9wbGUsZGM9Y2x1c3RlcixkYz1sb2NhbCIKICAgICAgUmVxdWlyZSB2YWxpZC11c2VyCiAgPC9Mb2NhdGlvbj4KICA8TG9jYXRpb24gL2dyYXBoPgogICAgICBQcm94eVBhc3MgaHR0cDovL2xvY2FsaG9zdDo5MDkwL2dyYXBoCiAgICAgIFByb3h5UGFzc1JldmVyc2UgaHR0cDovL2xvY2FsaG9zdDo5MDkwL2dyYXBoCiAgICAgIEF1dGhOYW1lICJQcm9tZXRoZXVzIgogICAgICBBdXRoVHlwZSBCYXNpYwogICAgICBBdXRoQmFzaWNQcm92aWRlciBmaWxlIGxkYXAKICAgICAgQXV0aFVzZXJGaWxlIC91c3IvbG9jYWwvYXBhY2hlMi9jb25mLy5odHBhc3N3ZAogICAgICBBdXRoTERBUEJpbmRETiBjbj1hZG1pbixkYz1jbHVzdGVyLGRjPWxvY2FsCiAgICAgIEF1dGhMREFQQmluZFBhc3N3b3JkIHBhc3N3b3JkCiAgICAgIEF1dGhMREFQVVJMICJsZGFwOi8vbGRhcC5kZWZhdWx0LnN2Yy5jbHVzdGVyLmxvY2FsOjM4OS9vdT1QZW9wbGUsZGM9Y2x1c3RlcixkYz1sb2NhbCIKICAgICAgUmVxdWlyZSB2YWxpZC11c2VyCiAgPC9Mb2NhdGlvbj4KICAjIFJlc3RyaWN0IGFjY2VzcyB0byB0aGUgL2NvbmZpZyAoZGFzaGJvYXJkKSBhbmQgL2FwaS92MS9zdGF0dXMvY29uZmlnIChodHRwKSBlbmRwb2ludHMKICAjIHRvIHRoZSBhZG1pbiB1c2VyCiAgPExvY2F0aW9uIC9jb25maWc+CiAgICAgIFByb3h5UGFzcyBodHRwOi8vbG9jYWxob3N0OjkwOTAvY29uZmlnCiAgICAgIFByb3h5UGFzc1JldmVyc2UgaHR0cDovL2xvY2FsaG9zdDo5MDkwL2NvbmZpZwogICAgICBBdXRoTmFtZSAiUHJvbWV0aGV1cyIKICAgICAgQXV0aFR5cGUgQmFzaWMKICAgICAgQXV0aEJhc2ljUHJvdmlkZXIgZmlsZQogICAgICBBdXRoVXNlckZpbGUgL3Vzci9sb2NhbC9hcGFjaGUyL2NvbmYvLmh0cGFzc3dkCiAgICAgIFJlcXVpcmUgdmFsaWQtdXNlcgogIDwvTG9jYXRpb24+CiAgPExvY2F0aW9uIC9hcGkvdjEvc3RhdHVzL2NvbmZpZz4KICAgICAgUHJveHlQYXNzIGh0dHA6Ly9sb2NhbGhvc3Q6OTA5MC9hcGkvdjEvc3RhdHVzL2NvbmZpZwogICAgICBQcm94eVBhc3NSZXZlcnNlIGh0dHA6Ly9sb2NhbGhvc3Q6OTA5MC9hcGkvdjEvc3RhdHVzL2NvbmZpZwogICAgICBBdXRoTmFtZSAiUHJvbWV0aGV1cyIKICAgICAgQXV0aFR5cGUgQmFzaWMKICAgICAgQXV0aEJhc2ljUHJvdmlkZXIgZmlsZQogICAgICBBdXRoVXNlckZpbGUgL3Vzci9sb2NhbC9hcGFjaGUyL2NvbmYvLmh0cGFzc3dkCiAgICAgIFJlcXVpcmUgdmFsaWQtdXNlcgogIDwvTG9jYXRpb24+CiAgIyBSZXN0cmljdCBhY2Nlc3MgdG8gdGhlIC9mbGFncyAoZGFzaGJvYXJkKSBhbmQgL2FwaS92MS9zdGF0dXMvZmxhZ3MgKGh0dHApIGVuZHBvaW50cwogICMgdG8gdGhlIGFkbWluIHVzZXIKICA8TG9jYXRpb24gL2ZsYWdzPgogICAgICBQcm94eVBhc3MgaHR0cDovL2xvY2FsaG9zdDo5MDkwL2ZsYWdzCiAgICAgIFByb3h5UGFzc1JldmVyc2UgaHR0cDovL2xvY2FsaG9zdDo5MDkwL2ZsYWdzCiAgICAgIEF1dGhOYW1lICJQcm9tZXRoZXVzIgogICAgICBBdXRoVHlwZSBCYXNpYwogICAgICBBdXRoQmFzaWNQcm92aWRlciBmaWxlCiAgICAgIEF1dGhVc2VyRmlsZSAvdXNyL2xvY2FsL2FwYWNoZTIvY29uZi8uaHRwYXNzd2QKICAgICAgUmVxdWlyZSB2YWxpZC11c2VyCiAgPC9Mb2NhdGlvbj4KICA8TG9jYXRpb24gL2FwaS92MS9zdGF0dXMvZmxhZ3M+CiAgICAgIFByb3h5UGFzcyBodHRwOi8vbG9jYWxob3N0OjkwOTAvYXBpL3YxL3N0YXR1cy9mbGFncwogICAgICBQcm94eVBhc3NSZXZlcnNlIGh0dHA6Ly9sb2NhbGhvc3Q6OTA5MC9hcGkvdjEvc3RhdHVzL2ZsYWdzCiAgICAgIEF1dGhOYW1lICJQcm9tZXRoZXVzIgogICAgICBBdXRoVHlwZSBCYXNpYwogICAgICBBdXRoQmFzaWNQcm92aWRlciBmaWxlCiAgICAgIEF1dGhVc2VyRmlsZSAvdXNyL2xvY2FsL2FwYWNoZTIvY29uZi8uaHRwYXNzd2QKICAgICAgUmVxdWlyZSB2YWxpZC11c2VyCiAgPC9Mb2NhdGlvbj4KICAjIFJlc3RyaWN0IGFjY2VzcyB0byB0aGUgL3N0YXR1cyAoZGFzaGJvYXJkKSBlbmRwb2ludCB0byB0aGUgYWRtaW4gdXNlcgogIDxMb2NhdGlvbiAvc3RhdHVzPgogICAgICBQcm94eVBhc3MgaHR0cDovL2xvY2FsaG9zdDo5MDkwL3N0YXR1cwogICAgICBQcm94eVBhc3NSZXZlcnNlIGh0dHA6Ly9sb2NhbGhvc3Q6OTA5MC9zdGF0dXMKICAgICAgQXV0aE5hbWUgIlByb21ldGhldXMiCiAgICAgIEF1dGhUeXBlIEJhc2ljCiAgICAgIEF1dGhCYXNpY1Byb3ZpZGVyIGZpbGUKICAgICAgQXV0aFVzZXJGaWxlIC91c3IvbG9jYWwvYXBhY2hlMi9jb25mLy5odHBhc3N3ZAogICAgICBSZXF1aXJlIHZhbGlkLXVzZXIKICA8L0xvY2F0aW9uPgogICMgUmVzdHJpY3QgYWNjZXNzIHRvIHRoZSAvcnVsZXMgKGRhc2hib2FyZCkgZW5kcG9pbnQgdG8gdGhlIGFkbWluIHVzZXIKICA8TG9jYXRpb24gL3J1bGVzPgogICAgICBQcm94eVBhc3MgaHR0cDovL2xvY2FsaG9zdDo5MDkwL3J1bGVzCiAgICAgIFByb3h5UGFzc1JldmVyc2UgaHR0cDovL2xvY2FsaG9zdDo5MDkwL3J1bGVzCiAgICAgIEF1dGhOYW1lICJQcm9tZXRoZXVzIgogICAgICBBdXRoVHlwZSBCYXNpYwogICAgICBBdXRoQmFzaWNQcm92aWRlciBmaWxlCiAgICAgIEF1dGhVc2VyRmlsZSAvdXNyL2xvY2FsL2FwYWNoZTIvY29uZi8uaHRwYXNzd2QKICAgICAgUmVxdWlyZSB2YWxpZC11c2VyCiAgPC9Mb2NhdGlvbj4KICAjIFJlc3RyaWN0IGFjY2VzcyB0byB0aGUgL3RhcmdldHMgKGRhc2hib2FyZCkgYW5kIC9hcGkvdjEvdGFyZ2V0cyAoaHR0cCkgZW5kcG9pbnRzCiAgIyB0byB0aGUgYWRtaW4gdXNlcgogIDxMb2NhdGlvbiAvdGFyZ2V0cz4KICAgICAgUHJveHlQYXNzIGh0dHA6Ly9sb2NhbGhvc3Q6OTA5MC90YXJnZXRzCiAgICAgIFByb3h5UGFzc1JldmVyc2UgaHR0cDovL2xvY2FsaG9zdDo5MDkwL3RhcmdldHMKICAgICAgQXV0aE5hbWUgIlByb21ldGhldXMiCiAgICAgIEF1dGhUeXBlIEJhc2ljCiAgICAgIEF1dGhCYXNpY1Byb3ZpZGVyIGZpbGUKICAgICAgQXV0aFVzZXJGaWxlIC91c3IvbG9jYWwvYXBhY2hlMi9jb25mLy5odHBhc3N3ZAogICAgICBSZXF1aXJlIHZhbGlkLXVzZXIKICA8L0xvY2F0aW9uPgogIDxMb2NhdGlvbiAvYXBpL3YxL3RhcmdldHM+CiAgICAgIFByb3h5UGFzcyBodHRwOi8vbG9jYWxob3N0OjkwOTAvYXBpL3YxL3RhcmdldHMKICAgICAgUHJveHlQYXNzUmV2ZXJzZSBodHRwOi8vbG9jYWxob3N0OjkwOTAvYXBpL3YxL3RhcmdldHMKICAgICAgQXV0aE5hbWUgIlByb21ldGhldXMiCiAgICAgIEF1dGhUeXBlIEJhc2ljCiAgICAgIEF1dGhCYXNpY1Byb3ZpZGVyIGZpbGUKICAgICAgQXV0aFVzZXJGaWxlIC91c3IvbG9jYWwvYXBhY2hlMi9jb25mLy5odHBhc3N3ZAogICAgICBSZXF1aXJlIHZhbGlkLXVzZXIKICA8L0xvY2F0aW9uPgogICMgUmVzdHJpY3QgYWNjZXNzIHRvIHRoZSAvYXBpL3YxL2FkbWluL3RzZGIvIGVuZHBvaW50cyAoaHR0cCkgdG8gdGhlIGFkbWluIHVzZXIuCiAgIyBUaGVzZSBlbmRwb2ludHMgYXJlIGRpc2FibGVkIGJ5IGRlZmF1bHQsIGJ1dCBhcmUgaW5jbHVkZWQgaGVyZSB0byBlbnN1cmUgb25seQogICMgYW4gYWRtaW4gdXNlciBoYXMgYWNjZXNzIHRvIHRoZXNlIGVuZHBvaW50cyB3aGVuIGVuYWJsZWQKICA8TG9jYXRpb24gL2FwaS92MS9hZG1pbi90c2RiLz4KICAgICAgUHJveHlQYXNzIGh0dHA6Ly9sb2NhbGhvc3Q6OTA5MC9hcGkvdjEvYWRtaW4vdHNkYi8KICAgICAgUHJveHlQYXNzUmV2ZXJzZSBodHRwOi8vbG9jYWxob3N0OjkwOTAvYXBpL3YxL2FkbWluL3RzZGIvCiAgICAgIEF1dGhOYW1lICJQcm9tZXRoZXVzIgogICAgICBBdXRoVHlwZSBCYXNpYwogICAgICBBdXRoQmFzaWNQcm92aWRlciBmaWxlCiAgICAgIEF1dGhVc2VyRmlsZSAvdXNyL2xvY2FsL2FwYWNoZTIvY29uZi8uaHRwYXNzd2QKICAgICAgUmVxdWlyZSB2YWxpZC11c2VyCiAgPC9Mb2NhdGlvbj4KPC9WaXJ0dWFsSG9zdD4=
---
apiVersion: v1
kind: Secret
metadata:
  name: release-name-admin-user
type: Opaque
data:
  PROMETHEUS_ADMIN_USERNAME: YWRtaW4=
  PROMETHEUS_ADMIN_PASSWORD: Y2hhbmdlbWU=
  PROMETHEUS_FEDERATE_USERNAME: ZmVkZXJhdGU=
  PROMETHEUS_FEDERATE_PASSWORD: Y2hhbmdlbWU=
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: release-name-prometheus-bin
data:
  apache.sh: |
    #!/bin/bash



    set -ev

    COMMAND="${@:-start}"

    function start () {

      if [ -f /etc/apache2/envvars ]; then
         # Loading Apache2 ENV variables
         source /etc/httpd/apache2/envvars
      fi
      # Apache gets grumpy about PID files pre-existing
      rm -f /etc/httpd/logs/httpd.pid

      if [ -f /usr/local/apache2/conf/.htpasswd ]; then
        htpasswd -b /usr/local/apache2/conf/.htpasswd "$PROMETHEUS_ADMIN_USERNAME" "$PROMETHEUS_ADMIN_PASSWORD"
      else
        htpasswd -cb /usr/local/apache2/conf/.htpasswd "$PROMETHEUS_ADMIN_USERNAME" "$PROMETHEUS_ADMIN_PASSWORD"
      fi

      if [ -n "$PROMETHEUS_FEDERATE_USERNAME" ]; then
        htpasswd -b /usr/local/apache2/conf/.htpasswd "$PROMETHEUS_FEDERATE_USERNAME" "$PROMETHEUS_FEDERATE_PASSWORD"
      fi

      #Launch Apache on Foreground
      exec httpd -DFOREGROUND
    }

    function stop () {
      apachectl -k graceful-stop
    }

    $COMMAND
  prometheus.sh: "#!/bin/sh\n\n\n\nset -ex\nCOMMAND=\"${@:-start}\"\n\nfunction start () {\n\n  exec /bin/prometheus --config.file=/etc/config/prometheus.yml  --log.level=info  --query.max-concurrency=20  --query.timeout=2m  --storage.tsdb.path=/var/lib/prometheus/data  --storage.tsdb.retention.time=7d \n}\n\nfunction stop () {\n  kill -TERM 1\n}\n\n$COMMAND\n"
  helm-tests.sh: |
    #!/bin/bash



    set -ex

    function endpoints_up () {
      endpoints_result=$(curl ${CACERT_OPTION} -K- <<< "--user ${PROMETHEUS_ADMIN_USERNAME}:${PROMETHEUS_ADMIN_PASSWORD}" \
        "${PROMETHEUS_ENDPOINT}/api/v1/query?query=up" \
        | python -c "import sys, json; print(json.load(sys.stdin)['status'])")
      if [ "$endpoints_result" = "success" ];
      then
        echo "PASS: Endpoints successfully queried!"
      else
        echo "FAIL: Endpoints not queried!";
        exit 1;
      fi
    }

    function get_targets () {
      targets_result=$(curl ${CACERT_OPTION} -K- <<< "--user ${PROMETHEUS_ADMIN_USERNAME}:${PROMETHEUS_ADMIN_PASSWORD}" \
        "${PROMETHEUS_ENDPOINT}/api/v1/targets" \
        | python -c "import sys, json; print(json.load(sys.stdin)['status'])")
      if [ "$targets_result" = "success" ];
      then
        echo "PASS: Targets successfully queried!"
      else
        echo "FAIL: Endpoints not queried!";
        exit 1;
      fi
    }

    function get_alertmanagers () {
      alertmanager=$(curl ${CACERT_OPTION} -K- <<< "--user ${PROMETHEUS_ADMIN_USERNAME}:${PROMETHEUS_ADMIN_PASSWORD}" \
        "${PROMETHEUS_ENDPOINT}/api/v1/alertmanagers" \
        |  python -c "import sys, json; print(json.load(sys.stdin)['status'])")
      if [ "$alertmanager" = "success" ];
      then
        echo "PASS: Alertmanager successfully queried!"
      else
        echo "FAIL: Alertmanager not queried!";
        exit 1;
      fi
    }

    endpoints_up
    get_targets
    get_alertmanagers
  image-repo-sync.sh: |
    #!/bin/sh
    set -ex

    IFS=','; for IMAGE in ${IMAGE_SYNC_LIST}; do
      docker pull ${IMAGE}
      docker tag ${IMAGE} ${LOCAL_REPO}/${IMAGE}
      docker push ${LOCAL_REPO}/${IMAGE}
    done
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: release-name-prometheus
rules:
  - apiGroups:
      - ""
    resources:
      - nodes
      - nodes/proxy
      - services
      - endpoints
      - pods
    verbs:
      - get
      - list
      - watch
  - apiGroups:
      - ""
    resources:
      - configmaps
    verbs:
      - get
  - nonResourceURLs:
      - /metrics
    verbs:
      - get
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: release-name-prometheus
subjects:
  - kind: ServiceAccount
    name: release-name-prometheus
    namespace: default
roleRef:
  kind: ClusterRole
  name: release-name-prometheus
  apiGroup: rbac.authorization.k8s.io
---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: release-name-default-release-name-test
  namespace: HGr6hJyFE
rules:
  - apiGroups:
      - ""
      - extensions
      - batch
      - apps
    verbs:
      - get
      - list
    resources:
      - services
      - endpoints
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: release-name-release-name-test
  namespace: HGr6hJyFE
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: release-name-default-release-name-test
subjects:
  - kind: ServiceAccount
    name: release-name-test
    namespace: default
---
apiVersion: v1
kind: Service
metadata:
  name: prometheus
spec:
  ports:
    - name: http
      port: 80
    - name: https
      port: 443
  selector:
    app: ingress-api
---
apiVersion: v1
kind: Service
metadata:
  name: prom-metrics
  labels:
    release_group: release-name
    application: prometheus
    component: metrics
  annotations:
    prometheus.io/scrape: "true"
spec:
  ports:
    - name: http
      port: 80
      targetPort: 80
  selector:
    release_group: release-name
    application: prometheus
    component: api
---
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: release-name-prometheus
  annotations:
    openstackhelm.openstack.org/release_uuid: ""
  labels:
    release_group: release-name
    application: prometheus
    component: api
spec:
  serviceName: prom-metrics
  podManagementPolicy: Parallel
  replicas: 1
  selector:
    matchLabels:
      release_group: release-name
      application: prometheus
      component: api
  template:
    metadata:
      labels:
        release_group: release-name
        application: prometheus
        component: api
      annotations:
        openstackhelm.openstack.org/release_uuid: ""
        configmap-bin-hash: 22bf4e4dda9d14edaca5c703cd2ea67fbd9aa6269029a2b75806334f1b5ae59f
        configmap-etc-hash: 5b06e94655221ae709ee4308072077c61fec1f7092821d7c281b2792c9e734bd
    spec:
      securityContext:
        runAsUser: 65534
      serviceAccountName: release-name-prometheus
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - podAffinityTerm:
                labelSelector:
                  matchExpressions:
                    - key: release_group
                      operator: In
                      values:
                        - release-name
                    - key: application
                      operator: In
                      values:
                        - prometheus
                    - key: component
                      operator: In
                      values:
                        - api
                topologyKey: kubernetes.io/hostname
              weight: 10
      nodeSelector:
        openstack-control-plane: enabled
      terminationGracePeriodSeconds: 30
      initContainers:
        - name: init
          image: quay.io/airshipit/kubernetes-entrypoint:v1.0.0
          imagePullPolicy: IfNotPresent
          securityContext:
            allowPrivilegeEscalation: false
            readOnlyRootFilesystem: true
            runAsUser: 65534
          env:
            - name: POD_NAME
              valueFrom:
                fieldRef:
                  apiVersion: v1
                  fieldPath: metadata.name
            - name: NAMESPACE
              valueFrom:
                fieldRef:
                  apiVersion: v1
                  fieldPath: metadata.namespace
            - name: INTERFACE_NAME
              value: eth0
            - name: PATH
              value: /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/
            - name: DEPENDENCY_SERVICE
              value: ""
            - name: DEPENDENCY_DAEMONSET
              value: ""
            - name: DEPENDENCY_CONTAINER
              value: ""
            - name: DEPENDENCY_POD_JSON
              value: ""
            - name: DEPENDENCY_CUSTOM_RESOURCE
              value: ""
          command:
            - kubernetes-entrypoint
          volumeMounts: []
        - name: prometheus-perms
          image: docker.io/prom/prometheus:v2.25.0
          imagePullPolicy: IfNotPresent
          securityContext:
            readOnlyRootFilesystem: false
            runAsUser: 0
          command:
            - chown
            - -R
            - 'nobody:'
            - /var/lib/prometheus/data
          volumeMounts:
            - name: pod-tmp
              mountPath: /tmp
            - name: storage
              mountPath: /var/lib/prometheus/data
      containers:
        - name: apache-proxy
          image: docker.io/httpd:2.4
          imagePullPolicy: IfNotPresent
          securityContext:
            readOnlyRootFilesystem: true
            runAsUser: 11117
            allowPrivilegeEscalation: false
            capabilities:
              drop:
                "": NET_RAW
          command:
            - /tmp/apache.sh
            - start
          ports:
            - name: http
              containerPort: 80
          env:
            - name: PROMETHEUS_PORT
              value: "9090"
            - name: PROMETHEUS_ADMIN_USERNAME
              valueFrom:
                secretKeyRef:
                  name: release-name-admin-user
                  key: PROMETHEUS_ADMIN_USERNAME
            - name: PROMETHEUS_ADMIN_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: release-name-admin-user
                  key: PROMETHEUS_ADMIN_PASSWORD
            - name: PROMETHEUS_FEDERATE_USERNAME
              valueFrom:
                secretKeyRef:
                  name: release-name-admin-user
                  key: PROMETHEUS_FEDERATE_USERNAME
            - name: PROMETHEUS_FEDERATE_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: release-name-admin-user
                  key: PROMETHEUS_FEDERATE_PASSWORD
          volumeMounts:
            - name: pod-tmp
              mountPath: /tmp
            - name: prometheus-bin
              mountPath: /tmp/apache.sh
              subPath: apache.sh
              readOnly: true
            - name: prometheus-etc
              mountPath: /usr/local/apache2/conf/httpd.conf
              subPath: httpd.conf
              readOnly: true
        - name: prometheus
          image: docker.io/prom/prometheus:v2.25.0
          imagePullPolicy: IfNotPresent
          securityContext:
            allowPrivilegeEscalation: false
            readOnlyRootFilesystem: true
          command:
            - /tmp/prometheus.sh
            - start
          lifecycle:
            preStop:
              exec:
                command:
                  - /tmp/prometheus.sh
                  - stop
          ports:
            - name: prom-metrics
              containerPort: 9090
          readinessProbe:
            httpGet:
              httpHeaders:
                - name: Authorization
                  value: Basic YWRtaW46Y2hhbmdlbWU=
              path: /status
              port: 80
              scheme: HTTP
            initialDelaySeconds: 30
            timeoutSeconds: 30
          env: null
          volumeMounts:
            - name: pod-tmp
              mountPath: /tmp
            - name: etcprometheus
              mountPath: /etc/config
            - name: rulesprometheus
              mountPath: /etc/config/rules
            - name: prometheus-etc
              mountPath: /etc/config/prometheus.yml
              subPath: prometheus.yml
              readOnly: true
            - name: prometheus-bin
              mountPath: /tmp/prometheus.sh
              subPath: prometheus.sh
              readOnly: true
            - name: storage
              mountPath: /var/lib/prometheus/data
      volumes:
        - name: pod-tmp
          emptyDir: {}
        - name: etcprometheus
          emptyDir: {}
        - name: rulesprometheus
          emptyDir: {}
        - name: prometheus-etc
          secret:
            secretName: release-name-prometheus-etc
            defaultMode: 292
        - name: prometheus-bin
          configMap:
            name: release-name-prometheus-bin
            defaultMode: 365
  volumeClaimTemplates:
    - metadata:
        name: storage
      spec:
        accessModes:
          - ReadWriteOnce
        resources:
          requests:
            storage: 5Gi
        storageClassName: general
---
apiVersion: networking.k8s.io/v1beta1
kind: Ingress
metadata:
  name: prometheus
  annotations:
    kubernetes.io/ingress.class: nginx
    nginx.ingress.kubernetes.io/affinity: cookie
    nginx.ingress.kubernetes.io/rewrite-target: /
    nginx.ingress.kubernetes.io/session-cookie-expires: "600"
    nginx.ingress.kubernetes.io/session-cookie-hash: sha1
    nginx.ingress.kubernetes.io/session-cookie-max-age: "600"
    nginx.ingress.kubernetes.io/session-cookie-name: kube-ingress-session-prometheus
spec:
  rules:
    - host: prometheus
      http:
        paths:
          - path: /
            backend:
              serviceName: prom-metrics
              servicePort: https
    - host: prometheus.default
      http:
        paths:
          - path: /
            backend:
              serviceName: prom-metrics
              servicePort: https
    - host: prometheus.default.svc.cluster.local
      http:
        paths:
          - path: /
            backend:
              serviceName: prom-metrics
              servicePort: https
---
apiVersion: v1
kind: Pod
metadata:
  name: release-name-test
  labels:
    release_group: release-name
    application: prometheus
    component: test
  annotations:
    openstackhelm.openstack.org/release_uuid: ""
    helm.sh/hook: test-success
spec:
  securityContext:
    runAsUser: 65534
  serviceAccountName: release-name-test
  nodeSelector:
    openstack-control-plane: enabled
  restartPolicy: Never
  initContainers:
    - name: init
      image: quay.io/airshipit/kubernetes-entrypoint:v1.0.0
      imagePullPolicy: IfNotPresent
      securityContext:
        allowPrivilegeEscalation: false
        readOnlyRootFilesystem: true
        runAsUser: 65534
      env:
        - name: POD_NAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.name
        - name: NAMESPACE
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.namespace
        - name: INTERFACE_NAME
          value: eth0
        - name: PATH
          value: /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/
        - name: DEPENDENCY_SERVICE
          value: default:prom-metrics
        - name: DEPENDENCY_DAEMONSET
          value: ""
        - name: DEPENDENCY_CONTAINER
          value: ""
        - name: DEPENDENCY_POD_JSON
          value: ""
        - name: DEPENDENCY_CUSTOM_RESOURCE
          value: ""
      command:
        - kubernetes-entrypoint
      volumeMounts: []
  containers:
    - name: prometheus-helm-tests
      image: docker.io/openstackhelm/heat:newton-ubuntu_xenial
      imagePullPolicy: IfNotPresent
      securityContext:
        allowPrivilegeEscalation: false
        readOnlyRootFilesystem: true
      command:
        - /tmp/helm-tests.sh
      env:
        - name: PROMETHEUS_ADMIN_USERNAME
          valueFrom:
            secretKeyRef:
              name: release-name-admin-user
              key: PROMETHEUS_ADMIN_USERNAME
        - name: PROMETHEUS_ADMIN_PASSWORD
          valueFrom:
            secretKeyRef:
              name: release-name-admin-user
              key: PROMETHEUS_ADMIN_PASSWORD
        - name: PROMETHEUS_ENDPOINT
          value: http://prom-metrics.default.svc.cluster.local
      volumeMounts:
        - name: pod-tmp
          mountPath: /tmp
        - name: prometheus-bin
          mountPath: /tmp/helm-tests.sh
          subPath: helm-tests.sh
          readOnly: true
  volumes:
    - name: pod-tmp
      emptyDir: {}
    - name: prometheus-bin
      configMap:
        name: release-name-prometheus-bin
        defaultMode: 365
