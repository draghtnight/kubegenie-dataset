[
  {
    "apiVersion": "v1",
    "kind": "ConfigMap",
    "metadata": {
      "name": "release-name-apache-knox-helm-confmap",
      "labels": {
        "app": "apache-knox-helm",
        "chart": "apache-knox-helm-0.1.10",
        "release": "release-name",
        "heritage": "Helm"
      }
    },
    "data": {
      "shared-providers-default-providers.json": "{\n    \"providers\": [\n        {\n            \"role\": \"authentication\",\n            \"name\": \"ShiroProvider\",\n            \"enabled\": \"true\",\n            \"params\": {\n                \"sessionTimeout\": \"20\",\n                \"main.ldapRealm\": \"org.apache.knox.gateway.shirorealm.KnoxLdapRealm\",\n                \"main.ldapContextFactory\": \"org.apache.knox.gateway.shirorealm.KnoxLdapContextFactory\",\n                \"main.ldapRealm.contextFactory\": \"$ldapContextFactory\",\n                \"main.ldapRealm.userDnTemplate\": \"uid={0},ou=people,dc=hadoop,dc=apache,dc=org\",\n                \"main.ldapRealm.contextFactory.url\": \"ldap://localhost:33389\",\n                \"main.ldapRealm.contextFactory.authenticationMechanism\": \"simple\",\n                \"urls./**\": \"authcBasic\"\n            }\n        }\n    ]\n}\n",
      "topologies-sandbox.xml": "<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<topology>\n\n    <gateway>\n        <provider>\n            <role>authentication</role>\n            <name>ShiroProvider</name>\n            <enabled>true</enabled>\n            <param>\n                <!-- \n                session timeout in minutes,  this is really idle timeout,\n                defaults to 30mins, if the property value is not defined,, \n                current client authentication would expire if client idles contiuosly for more than this value\n                -->\n                <name>sessionTimeout</name>\n                <value>30</value>\n            </param>\n            <param>\n                <name>main.ldapRealm</name>\n                <value>org.apache.knox.gateway.shirorealm.KnoxLdapRealm</value>\n            </param>\n            <param>\n                <name>main.ldapContextFactory</name>\n                <value>org.apache.knox.gateway.shirorealm.KnoxLdapContextFactory</value>\n            </param>\n            <param>\n                <name>main.ldapRealm.contextFactory</name>\n                <value>$ldapContextFactory</value>\n            </param>\n            <param>\n                <name>main.ldapRealm.userDnTemplate</name>\n                <value>uid={0},ou=people,dc=hadoop,dc=apache,dc=org</value>\n            </param>\n            <param>\n                <name>main.ldapRealm.contextFactory.url</name>\n                <value>ldap://localhost:33389</value>\n            </param>\n            <param>\n                <name>main.ldapRealm.contextFactory.authenticationMechanism</name>\n                <value>simple</value>\n            </param>\n            <param>\n                <name>urls./**</name>\n                <value>authcBasic</value>\n            </param>\n        </provider>\n\n        <provider>\n            <role>authorization</role>\n            <name>AclsAuthz</name>\n            <enabled>true</enabled>\n            <param>\n                <name>knox.acl</name>\n                <value>admin;*;*</value>\n            </param>\n        </provider>\n\n        <provider>\n            <role>identity-assertion</role>\n            <name>Default</name>\n            <enabled>true</enabled>\n        </provider>\n    </gateway>\n\n    <service>\n        <role>NAMENODE</role>\n        <url>hdfs://nn:9000/webhdfs</url> <!-- e.g. hdfs://hadoop-demo-name-node:9000/webhdfs -->\n    </service>\n\n    <service>\n        <role>RESOURCEMANAGER</role>\n        <url>http://rm:8088/ws</url> <!-- e.g. http://hadoop-demo-yarn-rm:8088/ws -->\n    </service>\n    \n    <service>\n        <role>WEBHDFS</role>\n        <url>http://nn:50070/webhdfs</url> <!-- e.g. http://hadoop-demo-name-node:50070/webhdfs -->\n    </service>\n\n    <service>\n        <role>HDFSUI</role>\n        <url>http://nn:50070/</url> <!-- e.g. http://sandbox.hortonworks.com:50070 -->\n        \n        <!-- cf. https://issues.apache.org/jira/browse/KNOX-1644 and https://community.cloudera.com/t5/Support-Questions/HDP-3-1-0-Knox-proxy-HDFSUI-HTTP-401-Error/m-p/240282 -->\n        <version>2.7.0</version> \n    </service>\n\n    <!-- TODO: Find currect URL of the jobtracker\n            The RPC address at which the Resource Manager exposes the JOBTRACKER endpoint can be found via the yarn.resourcemanager.address in the yarn-site.xml file. In a Sandbox installation this can typically be found in /etc/hadoop/conf/yarn-site.xml.\n    <service>\n        <role>JOBTRACKER</role>\n        <url>rpc://localhost:8050</url>\n    </service>\n    -->\n\n    <!-- TODO:\n    <service>\n        <role>JOBHISTORYUI</role>\n        <url>http://sandbox.hortonworks.com:19888</url>\n    </service>\n    -->\n\n    <service>\n        <role>YARNUI</role>\n         <url>http://yarn-ui:8088</url> <!-- e.g. http://sandbox.hortonworks.com:8088 -->\n    </service>\n\n    <!-- New in 1.1.4\n    <service>\n        <role>WEBHCAT</role>\n        <url>http://localhost:50111/templeton</url>\n    </service>\n\n    <service>\n        <role>OOZIE</role>\n        <url>http://localhost:11000/oozie</url>\n        <param>\n            <name>replayBufferSize</name>\n            <value>8</value>\n        </param>\n    </service>\n\n    <service>\n        <role>WEBHBASE</role>\n        <url>http://localhost:60080</url>\n        <param>\n            <name>replayBufferSize</name>\n            <value>8</value>\n        </param>\n    </service>\n\n    <service>\n        <role>HIVE</role>\n        <url>http://localhost:10001/cliservice</url>\n        <param>\n            <name>replayBufferSize</name>\n            <value>8</value>\n        </param>\n    </service>\n\n    <service>\n        <role>DRUID-COORDINATOR-UI</role>\n        <url>http://localhost:8081</url>\n    </service>\n\n    <service>\n        <role>DRUID-COORDINATOR</role>\n        <url>http://localhost:8081</url>\n    </service>\n\n    <service>\n        <role>DRUID-BROKER</role>\n        <url>http://localhost:8082</url>\n    </service>\n\n    <service>\n        <role>DRUID-ROUTER</role>\n        <url>http://localhost:8082</url>\n    </service>\n    \n    <service>\n        <role>DRUID-OVERLORD</role>\n        <url>http://localhost:8090</url>\n    </service>\n\n    <service>\n        <role>DRUID-OVERLORD-UI</role>\n        <url>http://localhost:8090</url>\n    </service>\n\n    <service>\n        <role>HUE</role>\n        <url>http://localhost:8889</url>\n    </service>\n-->\n</topology>\n",
      "topologies-homepage.xml": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!--\nLicensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the \"License\"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n-->\n<topology>\n    <name>homepage</name>\n    <gateway>\n        <provider>\n            <role>webappsec</role>\n            <name>WebAppSec</name>\n            <enabled>true</enabled>\n            <param>\n                <name>csrf.enabled</name>\n                <value>true</value>\n            </param>\n            <param>\n                <name>csrf.customHeader</name>\n                <value>X-XSRF-Header</value>\n            </param>\n            <param>\n                <name>csrf.methodsToIgnore</name>\n                <value>GET,OPTIONS,HEAD</value>\n            </param>\n            <param>\n                <name>xframe.options.enabled</name>\n                <value>true</value>\n            </param>\n            <param>\n                <name>xss.protection.enabled</name>\n                <value>true</value>\n            </param>\n            <param>\n                <name>strict.transport.enabled</name>\n                <value>false</value>\n            </param>\n        </provider>\n        <provider>\n            <role>federation</role>\n            <name>SSOCookieProvider</name>\n            <enabled>true</enabled>\n        </provider>\n    </gateway>\n    <service>\n        <role>KNOX-METADATA</role>\n    </service>\n    <application>\n        <name>home</name>\n    </application>\n</topology>\n",
      "topologies-metadata.xml": "<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<!--\nLicensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the \"License\"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n-->\n<topology>\n\n    <gateway>\n        <provider>\n            <role>authentication</role>\n            <name>ShiroProvider</name>\n            <enabled>true</enabled>\n            <param>\n                <name>sessionTimeout</name>\n                <value>30</value>\n            </param>\n            <param>\n                <name>main.ldapRealm</name>\n                <value>org.apache.knox.gateway.shirorealm.KnoxLdapRealm</value>\n            </param>\n            <param>\n                <name>main.ldapContextFactory</name>\n                <value>org.apache.knox.gateway.shirorealm.KnoxLdapContextFactory</value>\n            </param>\n            <param>\n                <name>main.ldapRealm.contextFactory</name>\n                <value>$ldapContextFactory</value>\n            </param>\n            <param>\n                <name>main.ldapRealm.userDnTemplate</name>\n                <value>uid={0},ou=people,dc=hadoop,dc=apache,dc=org</value>\n            </param>\n            <param>\n                <name>main.ldapRealm.contextFactory.url</name>\n                <value>ldap://localhost:33389</value>\n            </param>\n            <param>\n                <name>main.ldapRealm.contextFactory.authenticationMechanism</name>\n                <value>simple</value>\n            </param>\n            <param>\n                <name>urls./**</name>\n                <value>authcBasic</value>\n            </param>\n        </provider>\n    </gateway>\n\n    <service>\n        <role>KNOX-METADATA</role>\n    </service>\n\n</topology>\n",
      "topologies-admin.xml": "<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<!--\nLicensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the \"License\"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n-->\n<topology>\n\n    <gateway>\n\n        <provider>\n            <role>authentication</role>\n            <name>ShiroProvider</name>\n            <enabled>true</enabled>\n            <param>\n                <!-- \n                session timeout in minutes,  this is really idle timeout,\n                defaults to 30mins, if the property value is not defined,, \n                current client authentication would expire if client idles contiuosly for more than this value\n                -->\n                <name>sessionTimeout</name>\n                <value>30</value>\n            </param>\n            <param>\n                <name>main.ldapRealm</name>\n                <value>org.apache.knox.gateway.shirorealm.KnoxLdapRealm</value>\n            </param>\n            <param>\n                <name>main.ldapContextFactory</name>\n                <value>org.apache.knox.gateway.shirorealm.KnoxLdapContextFactory</value>\n            </param>\n            <param>\n                <name>main.ldapRealm.contextFactory</name>\n                <value>$ldapContextFactory</value>\n            </param>\n            <param>\n                <name>main.ldapRealm.userDnTemplate</name>\n                <value>uid={0},ou=people,dc=hadoop,dc=apache,dc=org</value>\n            </param>\n            <param>\n                <name>main.ldapRealm.contextFactory.url</name>\n                <value>ldap://localhost:33389</value>\n            </param>\n            <param>\n                <name>main.ldapRealm.contextFactory.authenticationMechanism</name>\n                <value>simple</value>\n            </param>\n            <param>\n                <name>urls./**</name>\n                <value>authcBasic</value>\n            </param>\n        </provider>\n\n        <provider>\n            <role>authorization</role>\n            <name>AclsAuthz</name>\n            <enabled>true</enabled>\n            <param>\n                <name>knox.acl</name>\n                <value>*;*;*</value>\n            </param>\n        </provider>\n\n        <provider>\n            <role>identity-assertion</role>\n            <name>Default</name>\n            <enabled>true</enabled>\n        </provider>\n\n        <provider>\n            <role>hostmap</role>\n            <name>static</name>\n            <enabled>true</enabled>\n            <param>\n                <name>localhost</name>\n                <value>sandbox,sandbox.hortonworks.com</value>\n            </param>\n        </provider>\n\n    </gateway>\n\n    <service>\n        <role>KNOX</role>\n    </service>\n\n</topology>\n",
      "topologies-knoxsso.xml": "<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<!--\nLicensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the \"License\"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n-->\n<topology>\n    <gateway>\n    <provider>\n        <role>webappsec</role>\n        <name>WebAppSec</name>\n        <enabled>true</enabled>\n        <param><name>xframe.options.enabled</name><value>true</value></param>\n    </provider>\n\n        <provider>\n            <role>authentication</role>\n            <name>ShiroProvider</name>\n            <enabled>true</enabled>\n            <param>\n                <!-- \n                session timeout in minutes,  this is really idle timeout,\n                defaults to 30mins, if the property value is not defined,, \n                current client authentication would expire if client idles contiuosly for more than this value\n                -->\n                <name>sessionTimeout</name>\n                <value>30</value>\n            </param>\n            <param>\n                <name>redirectToUrl</name>\n                <value>/${GATEWAY_PATH}/knoxsso/knoxauth/login.html</value>\n            </param>\n            <param>\n                <name>restrictedCookies</name>\n                <value>rememberme,WWW-Authenticate</value>\n            </param>\n            <param>\n                <name>main.ldapRealm</name>\n                <value>org.apache.knox.gateway.shirorealm.KnoxLdapRealm</value>\n            </param>\n            <param>\n                <name>main.ldapContextFactory</name>\n                <value>org.apache.knox.gateway.shirorealm.KnoxLdapContextFactory</value>\n            </param>\n            <param>\n                <name>main.ldapRealm.contextFactory</name>\n                <value>$ldapContextFactory</value>\n            </param>\n            <param>\n                <name>main.ldapRealm.userDnTemplate</name>\n                <value>uid={0},ou=people,dc=hadoop,dc=apache,dc=org</value>\n            </param>\n            <param>\n                <name>main.ldapRealm.contextFactory.url</name>\n                <value>ldap://localhost:33389</value>\n            </param>    \n            <param>\n                <name>main.ldapRealm.authenticationCachingEnabled</name>\n                <value>false</value>\n            </param>\n            <param>\n                <name>main.ldapRealm.contextFactory.authenticationMechanism</name>\n                <value>simple</value>\n            </param>\n            <param>\n                <name>urls./**</name>\n                <value>authcBasic</value>\n            </param>\n        </provider>\n\n        <provider>\n            <role>identity-assertion</role>\n            <name>Default</name>\n            <enabled>true</enabled>\n        </provider>\n\n        <provider>\n            <role>hostmap</role>\n            <name>static</name>\n            <enabled>true</enabled>\n            <param>\n                <name>localhost</name>\n                <value>sandbox,sandbox.hortonworks.com</value>\n            </param>\n        </provider>\n\n    </gateway>\n\n    <application>\n    <name>knoxauth</name>\n    </application>\n\n    <service>\n        <role>KNOXSSO</role>\n        <param>\n            <name>knoxsso.cookie.secure.only</name>\n            <value>true</value>\n        </param>\n        <param>\n            <!-- 24 hours in milliseconds = 86400000 -->\n            <name>knoxsso.token.ttl</name>\n            <value>86400000</value>\n        </param>\n        <param>\n          <name>knoxsso.redirect.whitelist.regex</name>\n          <value>.*</value>\n          <!-- <value>^https?:\\/\\/(localhost|127\\.0\\.0\\.1|0:0:0:0:0:0:0:1|::1):[0-9].*$</value> -->\n        </param>\n    </service>\n\n</topology>  \n",
      "topologies-manager.xml": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!--\nLicensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the \"License\"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n-->\n<topology>\n    <name>manager</name>\n    <gateway>\n        <provider>\n            <role>webappsec</role>\n            <name>WebAppSec</name>\n            <enabled>true</enabled>\n            <param><name>csrf.enabled</name><value>true</value></param>\n            <param><name>csrf.customHeader</name><value>X-XSRF-Header</value></param>\n            <param><name>csrf.methodsToIgnore</name><value>GET,OPTIONS,HEAD</value></param>\n            <param><name>xframe.options.enabled</name><value>true</value></param>\n            <param><name>xss.protection.enabled</name><value>true</value></param>\n            <param><name>strict.transport.enabled</name><value>false</value></param>\n        </provider>\n        \n     \n        <provider>\n            <role>authentication</role>\n            <name>ShiroProvider</name>\n            <enabled>true</enabled>\n            <param>\n                <name>sessionTimeout</name>\n                <value>30</value>\n            </param>\n            <param>\n                <name>main.ldapRealm</name>\n                <value>org.apache.knox.gateway.shirorealm.KnoxLdapRealm</value>\n            </param>\n            <param>\n                <name>main.ldapContextFactory</name>\n                <value>org.apache.knox.gateway.shirorealm.KnoxLdapContextFactory</value>\n            </param>\n            <param>\n                <name>main.ldapRealm.contextFactory</name>\n                <value>$ldapContextFactory</value>\n            </param>\n            <param>\n                <name>main.ldapRealm.userDnTemplate</name>\n                <value>uid={0},ou=people,dc=hadoop,dc=apache,dc=org</value>\n            </param>\n            <param>\n                <name>main.ldapRealm.contextFactory.url</name>\n                <value>ldap://localhost:33389</value>\n            </param>\n            <param>\n                <name>main.ldapRealm.contextFactory.authenticationMechanism</name>\n                <value>simple</value>\n            </param>\n            <param>\n                <name>urls./**</name>\n                <value>authcBasic</value>\n            </param>\n        </provider>\n\n        <provider>\n            <role>authorization</role>\n            <name>AclsAuthz</name>\n            <enabled>true</enabled>\n            <param>\n                <name>knox.acl.mode</name>\n                <value>OR</value>\n            </param>\n\n            <param>\n                <name>knox.acl</name>\n                <value>admin;*;*</value>\n            </param>\n        </provider>\n\n        <provider>\n            <role>identity-assertion</role>\n            <name>Default</name>\n            <enabled>true</enabled>\n        </provider>\n\n    <!-- 1.1.3 only -->\n      <provider>\n            <role>hostmap</role>\n            <name>static</name>\n            <enabled>true</enabled>\n            <param>\n                <name>localhost</name>\n                <value>sandbox,sandbox.hortonworks.com</value>\n            </param>\n        </provider>\n    \n    </gateway>\n    \n    <service>\n        <role>KNOX</role>\n    </service>\n\n    <application>\n        <name>admin-ui</name>\n    </application>\n\n</topology>\n",
      "gateway-log4j.properties": "# Licensed to the Apache Software Foundation (ASF) under one\n# or more contributor license agreements.  See the NOTICE file\n# distributed with this work for additional information\n# regarding copyright ownership.  The ASF licenses this file\n# to you under the Apache License, Version 2.0 (the\n# \"License\"); you may not use this file except in compliance\n# with the License.  You may obtain a copy of the License at\n#\n#     http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n\napp.log.dir=${launcher.dir}/../logs\napp.log.file=${launcher.name}.log\napp.audit.file=${launcher.name}-audit.log\n\nlog4j.rootLogger=INFO, drfa\n\n log4j.logger.org.apache.knox.gateway=DEBUG\n\n#log4j.logger.org.eclipse.jetty=DEBUG\n#log4j.logger.org.apache.shiro=DEBUG\n#log4j.logger.org.apache.http=DEBUG\n#log4j.logger.org.apache.http.client=DEBUG\n#log4j.logger.org.apache.http.headers=DEBUG\n#log4j.logger.org.apache.http.wire=DEBUG\n\nlog4j.appender.stdout=org.apache.log4j.ConsoleAppender\nlog4j.appender.stdout.layout=org.apache.log4j.PatternLayout\nlog4j.appender.stdout.layout.ConversionPattern=%d{yy/MM/dd HH:mm:ss} %p %c{2}: %m%n\n\nlog4j.appender.drfa=org.apache.log4j.DailyRollingFileAppender\nlog4j.appender.drfa.File=${app.log.dir}/${app.log.file}\nlog4j.appender.drfa.DatePattern=.yyyy-MM-dd\nlog4j.appender.drfa.layout=org.apache.log4j.PatternLayout\nlog4j.appender.drfa.layout.ConversionPattern=%d{ISO8601} %-5p %c{2} (%F:%M(%L)) - %m%n\n\nlog4j.logger.audit=DEBUG, auditfile\nlog4j.appender.auditfile=org.apache.log4j.DailyRollingFileAppender\nlog4j.appender.auditfile.File=${app.log.dir}/${app.audit.file}\nlog4j.appender.auditfile.Append = true\nlog4j.appender.auditfile.DatePattern = '.'yyyy-MM-dd\nlog4j.appender.auditfile.layout = org.apache.knox.gateway.audit.log4j.layout.AuditLayout\n\n#log4j.logger.org.apache.knox.gateway.access=TRACE,httpaccess\n#log4j.additivity.org.apache.knox.gateway.access=false\n\n#log4j.logger.org.apache.knox.gateway.http=TRACE,httpserver\n#log4j.additivity.org.apache.knox.gateway.http=false\n##log4j.logger.org.apache.knox.gateway.http.request.headers=OFF\n##log4j.logger.org.apache.knox.gateway.http.response.headers=OFF\n##log4j.logger.org.apache.knox.gateway.http.request.body=OFF\n##log4j.logger.org.apache.knox.gateway.http.response.body=OFF\n\n#log4j.logger.org.apache.http.wire=DEBUG,httpclient\n#log4j.additivity.org.apache.http.wire=false\n\n#log4j.appender.httpaccess=org.apache.log4j.DailyRollingFileAppender\n#log4j.appender.httpaccess.File=${app.log.dir}/${launcher.name}-http-access.log\n#log4j.appender.httpaccess.DatePattern=.yyyy-MM-dd\n#log4j.appender.httpaccess.layout=org.apache.log4j.PatternLayout\n#log4j.appender.httpaccess.layout.ConversionPattern=%d{ISO8601}|%t|%m%n\n\n#log4j.appender.httpserver=org.apache.log4j.DailyRollingFileAppender\n#log4j.appender.httpserver.File=${app.log.dir}/${launcher.name}-http-server.log\n#log4j.appender.httpserver.DatePattern=.yyyy-MM-dd\n#log4j.appender.httpserver.layout=org.apache.log4j.PatternLayout\n#log4j.appender.httpserver.layout.ConversionPattern=%d{ISO8601}|%t|%m%n\n\n#log4j.appender.httpclient=org.apache.log4j.DailyRollingFileAppender\n#log4j.appender.httpclient.File=${app.log.dir}/${launcher.name}-http-client.log\n#log4j.appender.httpclient.DatePattern=.yyyy-MM-dd\n#log4j.appender.httpclient.layout=org.apache.log4j.PatternLayout\n#log4j.appender.httpclient.layout.ConversionPattern=%d{ISO8601}|%t|%m%n\n\n# Apache Shiro Related logging - KNOX-757\n#log4j.logger.org.springframework=DEBUG\n#log4j.logger.net.sf.ehcache=DEBUG\n#log4j.logger.org.apache.shiro.util.ThreadContext=DEBUG\n",
      "gateway-site.xml": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!--\nLicensed to the Apache Software Foundation (ASF) under one\nor more contributor license agreements.  See the NOTICE file\ndistributed with this work for additional information\nregarding copyright ownership.  The ASF licenses this file\nto you under the Apache License, Version 2.0 (the\n\"License\"); you may not use this file except in compliance\nwith the License.  You may obtain a copy of the License at\n\nhttp://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n-->\n<configuration>\n\n    <property>\n        <name>gateway.port</name>\n        <value>8080</value>\n        <description>The HTTP port for the Gateway.</description>\n    </property>\n\n    <property>\n        <name>gateway.path</name>\n        <value>gateway</value>\n        <description>The default context path for the gateway.</description>\n    </property>\n\n    <property>\n        <name>default.app.topology.name</name>\n         <value>sandbox</value>\n    </property>\n\n    <property>\n        <name>ssl.enabled</name>\n        <value>false</value>\n    </property>\n\n    <property>\n        <name>gateway.gateway.conf.dir</name>\n        <value>deployments</value>\n        <description>The directory within GATEWAY_HOME that contains gateway topology files and deployments.</description>\n    </property>\n\n    <property>\n        <name>gateway.hadoop.kerberos.secured</name>\n        <value>false</value>\n        <description>Boolean flag indicating whether the Hadoop cluster protected by Gateway is secured with Kerberos</description>\n    </property>\n\n    <property>\n        <name>java.security.krb5.conf</name>\n        <value>/etc/knox/conf/krb5.conf</value>\n        <description>Absolute path to krb5.conf file</description>\n    </property>\n\n    <property>\n        <name>java.security.auth.login.config</name>\n        <value>/etc/knox/conf/krb5JAASLogin.conf</value>\n        <description>Absolute path to JAAS login config file</description>\n    </property>\n\n    <property>\n        <name>sun.security.krb5.debug</name>\n        <value>true</value>\n        <description>Boolean flag indicating whether to enable debug messages for krb5 authentication</description>\n    </property>\n\n    <!-- @since 0.10 Websocket configs -->\n    <property>\n        <name>gateway.websocket.feature.enabled</name>\n        <value>false</value>\n        <description>Enable/Disable websocket feature.</description>\n    </property>\n\n    <property>\n        <name>gateway.scope.cookies.feature.enabled</name>\n        <value>false</value>\n        <description>Enable/Disable cookie scoping feature.</description>\n    </property>\n\n    <property>\n        <name>gateway.cluster.config.monitor.ambari.enabled</name>\n        <value>false</value>\n        <description>Enable/disable Ambari cluster configuration monitoring.</description>\n    </property>\n\n    <property>\n        <name>gateway.cluster.config.monitor.ambari.interval</name>\n        <value>60</value>\n        <description>The interval (in seconds) for polling Ambari for cluster configuration changes.</description>\n    </property>\n\n    <!-- Knox Admin related config (new in 1.1.4) -->\n    <property>\n        <name>gateway.knox.admin.groups</name>\n        <value>admin</value>\n    </property>\n\n    <!-- DEMO LDAP config for Hadoop Group Provider -->\n    <property>\n        <name>gateway.group.config.hadoop.security.group.mapping</name>\n        <value>org.apache.hadoop.security.LdapGroupsMapping</value>\n    </property>\n    <property>\n        <name>gateway.group.config.hadoop.security.group.mapping.ldap.bind.user</name>\n        <value>uid=guest,ou=people,dc=hadoop,dc=apache,dc=org</value>\n    </property>\n    <property>\n        <name>gateway.group.config.hadoop.security.group.mapping.ldap.bind.password</name>\n        <value>guest-password</value>\n    </property>\n    <property>\n        <name>gateway.group.config.hadoop.security.group.mapping.ldap.url</name>\n        <value>ldap://localhost:33389</value>\n    </property>\n    <property>\n        <name>gateway.group.config.hadoop.security.group.mapping.ldap.base</name>\n        <value></value>\n    </property>\n    <property>\n        <name>gateway.group.config.hadoop.security.group.mapping.ldap.search.filter.user</name>\n        <value>(&amp;(|(objectclass=person)(objectclass=applicationProcess))(cn={0}))</value>\n    </property>\n    <property>\n        <name>gateway.group.config.hadoop.security.group.mapping.ldap.search.filter.group</name>\n        <value>(objectclass=groupOfNames)</value>\n    </property>\n    <property>\n        <name>hgateway.group.config.adoop.security.group.mapping.ldap.search.attr.member</name>\n        <value>member</value>\n    </property>\n    <property>\n        <name>gateway.group.config.hadoop.security.group.mapping.ldap.search.attr.group.name</name>\n        <value>cn</value>\n    </property>\n    <property>\n        <name>gateway.dispatch.whitelist.services</name>\n        <value>DATANODE,HBASEUI,HDFSUI,JOBHISTORYUI,NODEUI,YARNUI,knoxauth</value>\n        <description>The comma-delimited list of service roles for which the gateway.dispatch.whitelist should be applied.</description>\n    </property>\n    <property>\n        <name>gateway.dispatch.whitelist</name>\n        <!-- <value>^https?:\\/\\/(localhost|127\\.0\\.0\\.1|0:0:0:0:0:0:0:1|::1):[0-9].*$</value> -->\n        <value>.*</value>\n        <description>The whitelist to be applied for dispatches associated with the service roles specified by gateway.dispatch.whitelist.services.\n        If the value is DEFAULT, a domain-based whitelist will be derived from the Knox host.</description>\n    </property>\n    <property>\n        <name>gateway.xforwarded.header.context.append.servicename</name>\n        <value>LIVYSERVER</value>\n        <description>Add service name to x-forward-context header for the list of services defined above.</description>\n    </property>\n   <!-- END: Knox Admin related config (new in 1.1.4) -->\n\n\n</configuration>\n",
      "knoxcli-log4j.properties": "# Licensed to the Apache Software Foundation (ASF) under one\n# or more contributor license agreements.  See the NOTICE file\n# distributed with this work for additional information\n# regarding copyright ownership.  The ASF licenses this file\n# to you under the Apache License, Version 2.0 (the\n# \"License\"); you may not use this file except in compliance\n# with the License.  You may obtain a copy of the License at\n#\n#     http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n\napp.log.dir=${launcher.dir}/../logs\napp.log.file=${launcher.name}.log\n\nlog4j.rootLogger=INFO, drfa\n\nlog4j.logger.org.apache.knox.gateway=DEBUG\n#log4j.logger.org.apache.knox.gateway=ALL\n\nlog4j.appender.stdout=org.apache.log4j.ConsoleAppender\nlog4j.appender.stdout.layout=org.apache.log4j.PatternLayout\nlog4j.appender.stdout.layout.ConversionPattern=%d{yy/MM/dd HH:mm:ss} %p %c{2}: %m%n\n\nlog4j.appender.drfa=org.apache.log4j.DailyRollingFileAppender\nlog4j.appender.drfa.File=${app.log.dir}/${app.log.file}\nlog4j.appender.drfa.DatePattern=.yyyy-MM-dd\nlog4j.appender.drfa.layout=org.apache.log4j.PatternLayout\nlog4j.appender.drfa.layout.ConversionPattern=%d{ISO8601} %-5p %c{2} (%F:%M(%L)) - %m%n\n",
      "ldap-log4j.properties": "# Licensed to the Apache Software Foundation (ASF) under one\n# or more contributor license agreements.  See the NOTICE file\n# distributed with this work for additional information\n# regarding copyright ownership.  The ASF licenses this file\n# to you under the Apache License, Version 2.0 (the\n# \"License\"); you may not use this file except in compliance\n# with the License.  You may obtain a copy of the License at\n#\n#     http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n\napp.log.dir=${launcher.dir}/../logs\napp.log.file=${launcher.name}.log\n\nlog4j.rootLogger=INFO, drfa\nlog4j.logger.org.apache.directory.server.ldap.LdapServer=INFO\nlog4j.logger.org.apache.directory=INFO\n\nlog4j.appender.stdout=org.apache.log4j.ConsoleAppender\nlog4j.appender.stdout.layout=org.apache.log4j.PatternLayout\nlog4j.appender.stdout.layout.ConversionPattern=%d{yy/MM/dd HH:mm:ss} %p %c{2}: %m%n\n\nlog4j.appender.drfa=org.apache.log4j.DailyRollingFileAppender\nlog4j.appender.drfa.File=${app.log.dir}/${app.log.file}\nlog4j.appender.drfa.DatePattern=.yyyy-MM-dd\nlog4j.appender.drfa.layout=org.apache.log4j.PatternLayout\nlog4j.appender.drfa.layout.ConversionPattern=%d{ISO8601} %-5p %c{2} (%F:%M(%L)) - %m%n    \n",
      "shell-log4j.properties": "# Licensed to the Apache Software Foundation (ASF) under one\n# or more contributor license agreements.  See the NOTICE file\n# distributed with this work for additional information\n# regarding copyright ownership.  The ASF licenses this file\n# to you under the Apache License, Version 2.0 (the\n# \"License\"); you may not use this file except in compliance\n# with the License.  You may obtain a copy of the License at\n#\n#     http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n\napp.log.dir=${launcher.dir}/../logs\napp.log.file=${launcher.name}.log\n\nlog4j.rootLogger=INFO, drfa\n\n#log4j.logger.org.apache.http.wire=DEBUG\n\nlog4j.appender.stdout=org.apache.log4j.ConsoleAppender\nlog4j.appender.stdout.layout=org.apache.log4j.PatternLayout\nlog4j.appender.stdout.layout.ConversionPattern=%d{yy/MM/dd HH:mm:ss} %p %c{2}: %m%n\n\nlog4j.appender.drfa=org.apache.log4j.DailyRollingFileAppender\nlog4j.appender.drfa.File=${app.log.dir}/${app.log.file}\nlog4j.appender.drfa.DatePattern=.yyyy-MM-dd\nlog4j.appender.drfa.layout=org.apache.log4j.PatternLayout\nlog4j.appender.drfa.layout.ConversionPattern=%d{ISO8601} %-5p %c{2} (%F:%M(%L)) - %m%n\n",
      "users.ldif": "# Licensed to the Apache Software Foundation (ASF) under one\n# or more contributor license agreements.  See the NOTICE file\n# distributed with this work for additional information\n# regarding copyright ownership.  The ASF licenses this file\n# to you under the Apache License, Version 2.0 (the\n# \"License\"); you may not use this file except in compliance\n# with the License.  You may obtain a copy of the License at\n#\n#     http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n\nversion: 1\n\n# Please replace with site specific values\ndn: dc=hadoop,dc=apache,dc=org\nobjectclass: organization\nobjectclass: dcObject\no: Hadoop\ndc: hadoop\n\n# Entry for a sample people container\n# Please replace with site specific values\ndn: ou=people,dc=hadoop,dc=apache,dc=org\nobjectclass:top\nobjectclass:organizationalUnit\nou: people\n\n# Entry for a sample end user\n# Please replace with site specific values\ndn: uid=guest,ou=people,dc=hadoop,dc=apache,dc=org\nobjectclass:top\nobjectclass:person\nobjectclass:organizationalPerson\nobjectclass:inetOrgPerson\ncn: Guest\nsn: User\nuid: guest\nuserPassword:guest-password\n\n# entry for sample user admin\ndn: uid=admin,ou=people,dc=hadoop,dc=apache,dc=org\nobjectclass:top\nobjectclass:person\nobjectclass:organizationalPerson\nobjectclass:inetOrgPerson\ncn: Admin\nsn: Admin\nuid: admin\nuserPassword:admin-password\n\n# entry for sample user root\ndn: uid=root,ou=people,dc=hadoop,dc=apache,dc=org\nobjectclass:top\nobjectclass:person\nobjectclass:organizationalPerson\nobjectclass:inetOrgPerson\ncn: Root\nsn: Root\nuid: root\nuserPassword:root-password\n\n# entry for sample user sam\ndn: uid=sam,ou=people,dc=hadoop,dc=apache,dc=org\nobjectclass:top\nobjectclass:person\nobjectclass:organizationalPerson\nobjectclass:inetOrgPerson\ncn: sam\nsn: sam\nuid: sam\nuserPassword:sam-password\n\n# entry for sample user tom\ndn: uid=tom,ou=people,dc=hadoop,dc=apache,dc=org\nobjectclass:top\nobjectclass:person\nobjectclass:organizationalPerson\nobjectclass:inetOrgPerson\ncn: tom\nsn: tom\nuid: tom\nuserPassword:tom-password\n\n# create FIRST Level groups branch\ndn: ou=groups,dc=hadoop,dc=apache,dc=org\nobjectclass:top\nobjectclass:organizationalUnit\nou: groups\ndescription: generic groups branch\n\n# create the analyst group under groups\ndn: cn=analyst,ou=groups,dc=hadoop,dc=apache,dc=org\nobjectclass:top\nobjectclass: groupofnames\ncn: analyst\ndescription:analyst  group\nmember: uid=sam,ou=people,dc=hadoop,dc=apache,dc=org\nmember: uid=tom,ou=people,dc=hadoop,dc=apache,dc=org\n\n# create the scientist group under groups\ndn: cn=scientist,ou=groups,dc=hadoop,dc=apache,dc=org\nobjectclass:top\nobjectclass: groupofnames\ncn: scientist\ndescription: scientist group\nmember: uid=sam,ou=people,dc=hadoop,dc=apache,dc=org\n",
      "descriptors-README": "THIS DIRECTORY IS WHERE SIMPLE TOPOLOGY DESCRIPTORS CAN BE PLACED\n"
    }
  },
  {
    "apiVersion": "v1",
    "kind": "Service",
    "metadata": {
      "name": "release-name-apache-knox-helm-svc",
      "labels": {
        "app": "apache-knox-helm",
        "chart": "apache-knox-helm-0.1.10",
        "release": "release-name",
        "heritage": "Helm",
        "component": "knox-service"
      }
    },
    "spec": {
      "type": "ClusterIP",
      "ports": [
        {
          "port": 8080,
          "protocol": "TCP"
        }
      ],
      "selector": {
        "app": "apache-knox-helm",
        "chart": "apache-knox-helm-0.1.10",
        "release": "release-name",
        "heritage": "Helm",
        "component": "knox-deployment-pod"
      }
    }
  },
  {
    "apiVersion": "apps/v1",
    "kind": "Deployment",
    "metadata": {
      "name": "release-name-apache-knox-helm-dep",
      "labels": {
        "app": "apache-knox-helm",
        "chart": "apache-knox-helm-0.1.10",
        "release": "release-name",
        "heritage": "Helm",
        "component": "knox-deployment"
      }
    },
    "spec": {
      "selector": {
        "matchLabels": {
          "app": "apache-knox-helm",
          "chart": "apache-knox-helm-0.1.10",
          "release": "release-name",
          "heritage": "Helm",
          "component": "knox-deployment-pod"
        }
      },
      "replicas": 1,
      "template": {
        "metadata": {
          "labels": {
            "app": "apache-knox-helm",
            "chart": "apache-knox-helm-0.1.10",
            "release": "release-name",
            "heritage": "Helm",
            "component": "knox-deployment-pod"
          }
        },
        "spec": {
          "containers": [
            {
              "image": "farberg/apache-knox-docker:1.6.1",
              "imagePullPolicy": "IfNotPresent",
              "name": "release-name-apache-knox-helm-pod",
              "ports": [
                {
                  "containerPort": 8080
                }
              ],
              "volumeMounts": [
                {
                  "name": "release-name-apache-knox-helm-dep-config-volume",
                  "mountPath": "/opt/knox/conf/"
                }
              ]
            }
          ],
          "volumes": [
            {
              "name": "release-name-apache-knox-helm-dep-config-volume",
              "configMap": {
                "name": "release-name-apache-knox-helm-confmap",
                "items": [
                  {
                    "key": "topologies-admin.xml",
                    "path": "topologies/admin.xml"
                  },
                  {
                    "key": "topologies-knoxsso.xml",
                    "path": "topologies/knoxsso.xml"
                  },
                  {
                    "key": "topologies-manager.xml",
                    "path": "topologies/manager.xml"
                  },
                  {
                    "key": "topologies-sandbox.xml",
                    "path": "topologies/sandbox.xml"
                  },
                  {
                    "key": "topologies-homepage.xml",
                    "path": "topologies/homepage.xml"
                  },
                  {
                    "key": "topologies-metadata.xml",
                    "path": "topologies/metadata.xml"
                  },
                  {
                    "key": "gateway-log4j.properties",
                    "path": "gateway-log4j.properties"
                  },
                  {
                    "key": "gateway-site.xml",
                    "path": "gateway-site.xml"
                  },
                  {
                    "key": "ldap-log4j.properties",
                    "path": "ldap-log4j.properties"
                  },
                  {
                    "key": "knoxcli-log4j.properties",
                    "path": "knoxcli-log4j.properties"
                  },
                  {
                    "key": "shell-log4j.properties",
                    "path": "shell-log4j.properties"
                  },
                  {
                    "key": "users.ldif",
                    "path": "users.ldif"
                  },
                  {
                    "key": "descriptors-README",
                    "path": "descriptors/README"
                  }
                ]
              }
            }
          ]
        }
      }
    }
  }
]