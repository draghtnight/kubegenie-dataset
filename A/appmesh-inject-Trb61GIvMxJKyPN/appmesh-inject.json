[
  {
    "apiVersion": "v1",
    "kind": "ServiceAccount",
    "metadata": {
      "name": "release-name-appmesh-inject",
      "labels": {
        "app.kubernetes.io/name": "appmesh-inject",
        "helm.sh/chart": "appmesh-inject-0.14.8",
        "app.kubernetes.io/instance": "release-name",
        "app.kubernetes.io/version": "0.5.0",
        "app.kubernetes.io/managed-by": "Helm"
      }
    }
  },
  {
    "apiVersion": "v1",
    "kind": "Secret",
    "metadata": {
      "name": "release-name-appmesh-inject",
      "labels": {
        "app.kubernetes.io/name": "appmesh-inject",
        "helm.sh/chart": "appmesh-inject-0.14.8",
        "app.kubernetes.io/instance": "release-name",
        "app.kubernetes.io/version": "0.5.0",
        "app.kubernetes.io/managed-by": "Helm"
      }
    },
    "type": "Opaque",
    "data": {
      "cert.pem": "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURpRENDQW5DZ0F3SUJBZ0lSQU5HbzIrOGlUdWxSdGl2TTRjbUNIdEV3RFFZSktvWklodmNOQVFFTEJRQXcKSERFYU1CZ0dBMVVFQXhNUllYQndiV1Z6YUMxcGJtcGxZM1F0WTJFd0hoY05Nakl3TmpFeU1Ea3lOakU1V2hjTgpNekl3TmpBNU1Ea3lOakU1V2pBbU1TUXdJZ1lEVlFRREV4dHlaV3hsWVhObExXNWhiV1V0WVhCd2JXVnphQzFwCmJtcGxZM1F3Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXdnZ0VLQW9JQkFRQzJYNlFVYWJIK3NZTWEKU3N4Z29wUFRQSVN0NVVFWFZDb1puazM5TXlFd0pnVk1JRlBQMTVUUmtwbUg5MWJoeXFhUnh6czdDWUJYTHJDTApjVGk5czlLb1hJNENhR0V1KytxTWdjSVowUTNLKzQvL2pXRko3d2NvdGZXMk1TNUhQbHlJMkZMVUM0cGdLamxlCjc4U21jQVgyYmZkR1BMTE4wUGJZTHVZci9YL2VnWVRDTFVMRGlGVmE5Mk1XSmt6TzJ0ZlFLSmJMeTRvMTZzaVUKaldDRitiZUU2TmhRZXVENnBaQmdoa2lpNXdudDNxdXhJRVNzRjNTU2x2T1d2bkJmaHROa3V6L05lSVI3dEtYYQp0ODlNTEhZa1hGcWMzL2RlaExjeUpOTFZOdzVhR0txRVhSR0dGOEUrT1JxQ3FONnFlUG1WM0NrK0cySGNEYTlxCjE5dlhYMGhaQWdNQkFBR2pnYm93Z2Jjd0RnWURWUjBQQVFIL0JBUURBZ1dnTUIwR0ExVWRKUVFXTUJRR0NDc0cKQVFVRkJ3TUJCZ2dyQmdFRkJRY0RBakFNQmdOVkhSTUJBZjhFQWpBQU1COEdBMVVkSXdRWU1CYUFGQkRmUmMrMApFRWorUWNkS1d0Q1p6UG5va29YUU1GY0dBMVVkRVFSUU1FNkNJM0psYkdWaGMyVXRibUZ0WlMxaGNIQnRaWE5vCkxXbHVhbVZqZEM1a1pXWmhkV3gwZ2lkeVpXeGxZWE5sTFc1aGJXVXRZWEJ3YldWemFDMXBibXBsWTNRdVpHVm0KWVhWc2RDNXpkbU13RFFZSktvWklodmNOQVFFTEJRQURnZ0VCQUQ3WFQySDdhTmdsanQ4d1FFZWxQZ0Erdk54dApjejJETUN1VXArdWhrQjVvT3pyMHpMcmc2OFFiVXRXUUNDTFM2OS82Z2NiSlRJQ3JzNTRieDIwLzM0VUdKNWUwCkdIelJsb2JQM3BrWXo3aHRSeWpla0xRNmwwYW5iczRhS3p4dGkyMmo1a2lZN3JQVXBRVHlXZURZc0xDYy80bTkKdzBFOUFUL3VTV2FuTUt4eHZpNGpXbzQwZGxyZmRLWm5EcU1ITUk2Wk9waUowZHM2VC9BSjdkUDErZGVaMDNheApSNWVOekVmR243ZlcyT2FqVUpGWHhmNVNJVW1LVEN0OGdzRXpITXJLZ3YvNGxyUUpmTnUveGFjMWFaR1VYUWl6CmNmaGFGSkhEa0UwaG84N1ZWby9rQWJDdVdCY3J1SGF5RVp4a1NRUm9DY0Q3REN1ZzhSeUorWjN0MDM0PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==",
      "key.pem": "LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb3dJQkFBS0NBUUVBdGwra0ZHbXgvckdER2tyTVlLS1QwenlFcmVWQkYxUXFHWjVOL1RNaE1DWUZUQ0JUCno5ZVUwWktaaC9kVzRjcW1rY2M3T3dtQVZ5NndpM0U0dmJQU3FGeU9BbWhoTHZ2cWpJSENHZEVOeXZ1UC80MWgKU2U4SEtMWDF0akV1Uno1Y2lOaFMxQXVLWUNvNVh1L0VwbkFGOW0zM1JqeXl6ZEQyMkM3bUsvMS8zb0dFd2kxQwp3NGhWV3ZkakZpWk16dHJYMENpV3k4dUtOZXJJbEkxZ2hmbTNoT2pZVUhyZytxV1FZSVpJb3VjSjdkNnJzU0JFCnJCZDBrcGJ6bHI1d1g0YlRaTHMvelhpRWU3U2wycmZQVEN4MkpGeGFuTi8zWG9TM01pVFMxVGNPV2hpcWhGMFIKaGhmQlBqa2FncWplcW5qNWxkd3BQaHRoM0EydmF0ZmIxMTlJV1FJREFRQUJBb0lCQURvSFlwa1FMSS9EQWRrNgoxWjhsKysxcHd6bmx5WGxYMFhHSFduOW5abmNBa2d6ditGc1kySVI2cGhtS1RQM1pVbmp1TU4yUEgyUWVPaFNVCmVSNTdlbHNSNENuSjlxcFJoQWNqUHBTaVhVWXFGMTZVS05HeW1jK05YbHFUZVlzM3Y0L1hiVHVGVklsV3hoeDgKSkZGbE1iQ0F1djZCVDgrSFh4UFlrR3FNNWNQeFhoMXN5T2YzdlNTWlZWMFRYS3Y5bzhMSFNZbVhoK29TQzN3RApTUkpPM3JCOWRDckNEcFBLSytESFI3QkdVMlRzbXNGWDh5bXBGbDRtdVRGTVlYVWVEMlE1bzhqOTNDR05DTnRlCjBsSTd4TVRPajZiM2R1Vis4ckhhZmsrSU9wSHdEcVhsejI5Wlo0S2tJaW9TL1JWMGdDV0YraGxIZHdVemk5TlMKbXVSbEtvRUNnWUVBN2VOZGlqTnV3aDQvNnhJdGovb2oxU2JpaGFzVnhxd28zNERZaFJKOUlDT2s3VUFvbEZ0bQpkMjZnOUp4UHNEbkQycENOZm9iaW9nZGJuN1BhdXVwQ3o1c1EwSG1BcnFUYk4rakx2M2FOWTU2azFyQlMzWWV3Cms2Zmh5Qm5BYThHSkE3SWhVamFmZTVoTUxiaGJBTUk0ZGdDTnRuU0piMjYzSXFiNW9NUC9Fa2tDZ1lFQXhFSkEKWnUyRDlnN2lDenF0dm44Rmp0UUIzaGlobkswSE1SUFIzWWZrQzIvTWYxdzJKVGQyKzlhUkM0Q09vMklzQ0VrcApxMkFSazVabTlDM2F3QUo1a2c0NnFIUmsrNzVucTlaemtwb2tISjVta2tHak5tSGZpcER3SE4wOTBaTmlrK2RoClNOUXVCcXRxMjlpa0laZ0xCSzZDSmlTQndDOFFyem9DejlRMmhaRUNnWUJxQ3JaQnl0ZU9sS2x0Z2picFBWb0gKeEVPcHppL3cxZ0dLVUFjMG1wOUlXbHRFbnhyM3R4NmdFcUtSSjdTbUc3bmdqaHRrMFgvcE5scHpnRnI2Z3o2eApDTENnSGVsczhIUUFJamZnNjFudmxHSnFpVU1IR1Z0dkZxRWc3OG5FdndyeXFNOE50T2UyMHBieXNvRnVmeVZvCkJLc25NQitybXJEc00zNkhXWmMwY1FLQmdIdWtZWDUyMUZRSVBGQm12MTdzRjB4TU5JRC9jNUdKVUthU25meTYKeCtpTW5vRCtUdjVUV3hwOXF4TmNBb0RjTUhGbjVtQ1pQWG1GbjRibC9KSksvTndQS3RWRnZ2ajZrOFdtYlZsRwowc2xVNGJueXNDaHFzTEpUYlhKQno5aGd5aEgwQzA0ZW5vQ0ZMZVVqTHdRYkRaWDlldkVjdnNHYzVSMy9waFhZCjFDQ0JBb0dCQUw0RmxJbGtoNnJYWTloVUpHRXJJanArUG1TQ0xVQjVWUnB3ZG1jUkpXNE91dUR3Wk5DVEZENmgKUmE2T1ZZeEh2RlduNUc0cXRTaGtJMVY1ZDNZTk1aSi9OdzBHUWFsMWYyODMySUNQK2d1Um9mTjJ4dG11WkZlSApvcG5tYkYrOU1GcG1iVkhaSHVRZzB6dW1RZzFwRCs1bi90RlJkMFNnLytBYnh4Q05zeVhMCi0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg=="
    }
  },
  {
    "apiVersion": "rbac.authorization.k8s.io/v1beta1",
    "kind": "ClusterRole",
    "metadata": {
      "name": "release-name-appmesh-inject",
      "labels": {
        "app.kubernetes.io/name": "appmesh-inject",
        "helm.sh/chart": "appmesh-inject-0.14.8",
        "app.kubernetes.io/instance": "release-name",
        "app.kubernetes.io/version": "0.5.0",
        "app.kubernetes.io/managed-by": "Helm"
      }
    },
    "rules": [
      {
        "apiGroups": [
          "*"
        ],
        "resources": [
          "replicasets"
        ],
        "verbs": [
          "get"
        ]
      }
    ]
  },
  {
    "apiVersion": "rbac.authorization.k8s.io/v1beta1",
    "kind": "ClusterRoleBinding",
    "metadata": {
      "name": "release-name-appmesh-inject",
      "labels": {
        "app.kubernetes.io/name": "appmesh-inject",
        "helm.sh/chart": "appmesh-inject-0.14.8",
        "app.kubernetes.io/instance": "release-name",
        "app.kubernetes.io/version": "0.5.0",
        "app.kubernetes.io/managed-by": "Helm"
      }
    },
    "roleRef": {
      "apiGroup": "rbac.authorization.k8s.io",
      "kind": "ClusterRole",
      "name": "release-name-appmesh-inject"
    },
    "subjects": [
      {
        "name": "release-name-appmesh-inject",
        "namespace": "default",
        "kind": "ServiceAccount"
      }
    ]
  },
  {
    "apiVersion": "v1",
    "kind": "Service",
    "metadata": {
      "name": "release-name-appmesh-inject",
      "labels": {
        "app.kubernetes.io/name": "appmesh-inject",
        "helm.sh/chart": "appmesh-inject-0.14.8",
        "app.kubernetes.io/instance": "release-name",
        "app.kubernetes.io/version": "0.5.0",
        "app.kubernetes.io/managed-by": "Helm"
      }
    },
    "spec": {
      "type": "ClusterIP",
      "ports": [
        {
          "name": "https",
          "port": 443,
          "targetPort": "https"
        }
      ],
      "selector": {
        "app.kubernetes.io/name": "appmesh-inject",
        "app.kubernetes.io/instance": "release-name"
      }
    }
  },
  {
    "apiVersion": "apps/v1",
    "kind": "Deployment",
    "metadata": {
      "name": "release-name-appmesh-inject",
      "labels": {
        "app.kubernetes.io/name": "appmesh-inject",
        "helm.sh/chart": "appmesh-inject-0.14.8",
        "app.kubernetes.io/instance": "release-name",
        "app.kubernetes.io/version": "0.5.0",
        "app.kubernetes.io/managed-by": "Helm"
      }
    },
    "spec": {
      "replicas": 1,
      "selector": {
        "matchLabels": {
          "app.kubernetes.io/name": "appmesh-inject",
          "app.kubernetes.io/instance": "release-name"
        }
      },
      "template": {
        "metadata": {
          "labels": {
            "app.kubernetes.io/name": "appmesh-inject",
            "app.kubernetes.io/instance": "release-name",
            "app.kubernetes.io/part-of": "appmesh"
          },
          "annotations": {
            "prometheus.io/scrape": "false"
          }
        },
        "spec": {
          "serviceAccountName": "release-name-appmesh-inject",
          "volumes": [
            {
              "name": "certs",
              "secret": {
                "secretName": "release-name-appmesh-inject"
              }
            }
          ],
          "containers": [
            {
              "name": "appmesh-inject",
              "image": "602401143452.dkr.ecr.us-west-2.amazonaws.com/amazon/aws-app-mesh-inject:v0.5.0",
              "imagePullPolicy": "IfNotPresent",
              "volumeMounts": [
                {
                  "name": "certs",
                  "mountPath": "/etc/webhook/certs",
                  "readOnly": true
                }
              ],
              "env": [
                {
                  "name": "APPMESH_NAME",
                  "value": "global"
                },
                {
                  "name": "APPMESH_LOG_LEVEL",
                  "value": "info"
                }
              ],
              "command": [
                "./appmeshinject",
                "-sidecar-image=840364872350.dkr.ecr.us-west-2.amazonaws.com/aws-appmesh-envoy:v1.15.1.0-prod",
                "-sidecar-cpu-requests=10m",
                "-sidecar-memory-requests=32Mi",
                "-init-image=840364872350.dkr.ecr.us-west-2.amazonaws.com/aws-appmesh-proxy-route-manager:v3-prod",
                "-enable-stats-tags=false",
                "-enable-statsd=false"
              ],
              "ports": [
                {
                  "name": "https",
                  "containerPort": 8080,
                  "protocol": "TCP"
                }
              ],
              "readinessProbe": {
                "httpGet": {
                  "path": "/healthz",
                  "port": "https",
                  "scheme": "HTTPS"
                }
              },
              "livenessProbe": {
                "httpGet": {
                  "path": "/healthz",
                  "port": "https",
                  "scheme": "HTTPS"
                }
              },
              "securityContext": {
                "readOnlyRootFilesystem": true,
                "allowPrivilegeEscalation": false,
                "capabilities": {
                  "drop": {
                    "": "NET_RAW"
                  }
                },
                "seccompProfile": {
                  "type": "RuntimeDefault"
                }
              },
              "resources": {
                "limits": {
                  "cpu": "500m",
                  "memory": "512Mi"
                },
                "requests": {
                  "cpu": "100m",
                  "memory": "64Mi"
                }
              }
            }
          ]
        }
      }
    }
  },
  {
    "apiVersion": "admissionregistration.k8s.io/v1beta1",
    "kind": "MutatingWebhookConfiguration",
    "metadata": {
      "name": "release-name-appmesh-inject",
      "labels": {
        "app.kubernetes.io/name": "appmesh-inject",
        "helm.sh/chart": "appmesh-inject-0.14.8",
        "app.kubernetes.io/instance": "release-name",
        "app.kubernetes.io/version": "0.5.0",
        "app.kubernetes.io/managed-by": "Helm"
      }
    },
    "webhooks": [
      {
        "name": "aws-app-mesh-inject.aws.amazon.com",
        "clientConfig": {
          "service": {
            "name": "appmesh-inject",
            "namespace": "default",
            "path": "/"
          },
          "caBundle": "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURJekNDQWd1Z0F3SUJBZ0lRTE9pNzhmcnZTNjUralZ4a2ZpbjJlVEFOQmdrcWhraUc5dzBCQVFzRkFEQWMKTVJvd0dBWURWUVFERXhGaGNIQnRaWE5vTFdsdWFtVmpkQzFqWVRBZUZ3MHlNakEyTVRJd09USTJNVGxhRncwegpNakEyTURrd09USTJNVGxhTUJ3eEdqQVlCZ05WQkFNVEVXRndjRzFsYzJndGFXNXFaV04wTFdOaE1JSUJJakFOCkJna3Foa2lHOXcwQkFRRUZBQU9DQVE4QU1JSUJDZ0tDQVFFQTFMUDV6MHVFSEV2Q1p3UVZQNUk4Nld1VmxvMEwKbmxiQ3V0NGRDY1liOWRGMm1DWEhiOW5lOVVrYXFubWpKTWc0blBLbzhibXo2eklveVBLbnVyZ2xnSVM2TzlqdApuR2tqbExYVkc5ZWpsekpCaHVXTnpZWDNNNnZUSGY1bGl4SndJSXdEVitCbmtuSUxUR00wMVllTFBOZzExN09iCmUwVzBLMDFPZVE2STYxNWVkVHBYQlRQanZlVFlxMVQ0SndjcXgxb1pLTDYzbUFMdzJRWTduWk5heVJiRHdPUkQKY2xtMlhxWlk3M3JWaGVYQ2duQ1lpdVdMZ1I5RnBjYTJvVFFRdmM5RW5TVnlVVU5xcE5maWFETWU1V0M0V21JTQpoRjJGZEVjb2p3YnJZWEZKL3RYNE9ITU9ybHE2NDh1cmlvTmlVV29nNTNHdkNtKzdHZEFoMHVhQWlRSURBUUFCCm8yRXdYekFPQmdOVkhROEJBZjhFQkFNQ0FxUXdIUVlEVlIwbEJCWXdGQVlJS3dZQkJRVUhBd0VHQ0NzR0FRVUYKQndNQ01BOEdBMVVkRXdFQi93UUZNQU1CQWY4d0hRWURWUjBPQkJZRUZCRGZSYyswRUVqK1FjZEtXdENaelBubwprb1hRTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElCQVFDaTUxNi91VG8xTjFIUmEwcmMxSCtBMlgrR3JGajdaSThLCnc0VFVSZHZibjNteEhieDYwUlFaV3p1L05IRFY2TUVXaDhCMFpZMm1xYTlDYkl5MGpMeWlHL0FtSkFkL2k5SWEKSEFzRVZUalBXMWxmRlllY2JZdEFobHRQejcxb3RUWlhpMTRhNVhFYXpGWWREZ1ZVbzcwSnJ6RUN2cHN2WkFBSgp6RWRLYTJBbGNaUTN0YVRDaFpOMVloNWRjeU92eHE2RUczQi9XQnV5MENXU2lndk96a2YvZHhLRHVVbDRnR1hYCnV1NVVKL0QweDlmR082TndLWjEyZ3FsYXNFcy9GdFNxVUJhYXBtRGhBMUVDeHlUQU41NUEvcWdRajRaRU5iS3YKMmpEd2tycm93WGhjKytoQklCZXZlc05vUFVKTHJLRnozLzZvRjJOM3R5S3FiVHRFa0hwUwotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg=="
        },
        "rules": [
          {
            "operations": [
              "CREATE",
              "UPDATE"
            ],
            "apiGroups": [
              ""
            ],
            "apiVersions": [
              "v1"
            ],
            "resources": [
              "pods"
            ]
          }
        ],
        "failurePolicy": "Ignore",
        "namespaceSelector": {
          "matchLabels": {
            "appmesh.k8s.aws/sidecarInjectorWebhook": "enabled"
          }
        }
      }
    ]
  }
]