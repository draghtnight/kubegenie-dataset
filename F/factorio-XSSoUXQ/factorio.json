[
  {
    "apiVersion": "v1",
    "kind": "ConfigMap",
    "metadata": {
      "name": "release-name-factorio-settings",
      "labels": {
        "helm.sh/chart": "factorio-1.1.2",
        "app.kubernetes.io/name": "factorio",
        "app.kubernetes.io/instance": "release-name",
        "app.kubernetes.io/version": "stable",
        "app.kubernetes.io/managed-by": "Helm"
      }
    },
    "data": {
      "server-settings.json": "{\n  \"afk_autokick_interval\": 0,\n  \"allow_commands\": \"admins-only\",\n  \"auto_pause\": true,\n  \"autosave_interval\": 10,\n  \"autosave_only_on_server\": true,\n  \"autosave_slots\": 5,\n  \"description\": \"Factorio running on Kubernetes\",\n  \"game_password\": \"\",\n  \"ignore_player_limit_for_returning_players\": false,\n  \"max_players\": 0,\n  \"max_upload_in_kilobytes_per_second\": 0,\n  \"max_upload_slots\": 5,\n  \"maximum_segment_size\": 100,\n  \"maximum_segment_size_peer_count\": 10,\n  \"minimum_latency_in_ticks\": 0,\n  \"minimum_segment_size\": 25,\n  \"minimum_segment_size_peer_count\": 20,\n  \"name\": \"Factorio\",\n  \"non_blocking_saving\": false,\n  \"only_admins_can_pause_the_game\": true,\n  \"password\": \"\",\n  \"require_user_verification\": false,\n  \"tags\": [\n    \"game\",\n    \"tags\"\n  ],\n  \"token\": \"\",\n  \"username\": \"\",\n  \"visibility\": {\n    \"lan\": true,\n    \"public\": false\n  }\n}\n",
      "rconpw": "replaceme\n",
      "map-gen-settings.json": "{\n  \"autoplace_controls\": {\n    \"coal\": {\n      \"frequency\": 1,\n      \"richness\": 1,\n      \"size\": 1\n    },\n    \"copper-ore\": {\n      \"frequency\": 1,\n      \"richness\": 1,\n      \"size\": 1\n    },\n    \"crude-oil\": {\n      \"frequency\": 1,\n      \"richness\": 1,\n      \"size\": 1\n    },\n    \"enemy-base\": {\n      \"frequency\": 1,\n      \"richness\": 1,\n      \"size\": 1\n    },\n    \"iron-ore\": {\n      \"frequency\": 1,\n      \"richness\": 1,\n      \"size\": 1\n    },\n    \"stone\": {\n      \"frequency\": 1,\n      \"richness\": 1,\n      \"size\": 1\n    },\n    \"trees\": {\n      \"frequency\": 1,\n      \"richness\": 1,\n      \"size\": 1\n    },\n    \"uranium-ore\": {\n      \"frequency\": 1,\n      \"richness\": 1,\n      \"size\": 1\n    }\n  },\n  \"cliff_settings\": {\n    \"cliff_elevation_0\": 10,\n    \"cliff_elevation_interval\": 40,\n    \"name\": \"cliff\",\n    \"richness\": 1\n  },\n  \"height\": 0,\n  \"peaceful_mode\": false,\n  \"property_expression_names\": {\n    \"control-setting:aux:bias\": \"0\",\n    \"control-setting:aux:frequency:multiplier\": \"1\",\n    \"control-setting:moisture:bias\": \"0\",\n    \"control-setting:moisture:frequency:multiplier\": \"1\"\n  },\n  \"seed\": null,\n  \"starting_area\": 1,\n  \"starting_points\": [\n    {\n      \"x\": 0,\n      \"y\": 0\n    }\n  ],\n  \"terrain_segmentation\": 1,\n  \"water\": 1,\n  \"width\": 0\n}\n",
      "map-settings.json": "{\n  \"difficulty_settings\": {\n    \"recipe_difficulty\": 0,\n    \"research_queue_setting\": \"after-victory\",\n    \"technology_difficulty\": 0,\n    \"technology_price_multiplier\": 1\n  },\n  \"enemy_evolution\": {\n    \"destroy_factor\": 0.002,\n    \"enabled\": true,\n    \"pollution_factor\": 9e-7,\n    \"time_factor\": 0.000004\n  },\n  \"enemy_expansion\": {\n    \"building_coefficient\": 0.1,\n    \"enabled\": true,\n    \"enemy_building_influence_radius\": 2,\n    \"friendly_base_influence_radius\": 2,\n    \"max_colliding_tiles_coefficient\": 0.9,\n    \"max_expansion_cooldown\": 216000,\n    \"max_expansion_distance\": 7,\n    \"min_base_spacing\": 3,\n    \"min_expansion_cooldown\": 14400,\n    \"neighbouring_base_chunk_coefficient\": 0.4,\n    \"neighbouring_chunk_coefficient\": 0.5,\n    \"other_base_coefficient\": 2,\n    \"settler_group_max_size\": 20,\n    \"settler_group_min_size\": 5\n  },\n  \"max_failed_behavior_count\": 3,\n  \"path_finder\": {\n    \"cache_accept_path_end_distance_ratio\": 0.15,\n    \"cache_accept_path_start_distance_ratio\": 0.2,\n    \"cache_max_connect_to_cache_steps_multiplier\": 100,\n    \"cache_path_end_distance_rating_multiplier\": 20,\n    \"cache_path_start_distance_rating_multiplier\": 10,\n    \"direct_distance_to_consider_short_request\": 100,\n    \"enemy_with_different_destination_collision_penalty\": 30,\n    \"extended_collision_penalty\": 3,\n    \"fwd2bwd_ratio\": 5,\n    \"general_entity_collision_penalty\": 10,\n    \"general_entity_subsequent_collision_penalty\": 3,\n    \"goal_pressure_ratio\": 2,\n    \"ignore_moving_enemy_collision_distance\": 5,\n    \"long_cache_min_cacheable_distance\": 30,\n    \"long_cache_size\": 25,\n    \"max_clients_to_accept_any_new_request\": 10,\n    \"max_clients_to_accept_short_new_request\": 100,\n    \"max_steps_worked_per_tick\": 100,\n    \"max_work_done_per_tick\": 8000,\n    \"min_steps_to_check_path_find_termination\": 2000,\n    \"negative_cache_accept_path_end_distance_ratio\": 0.3,\n    \"negative_cache_accept_path_start_distance_ratio\": 0.3,\n    \"negative_path_cache_delay_interval\": 20,\n    \"overload_levels\": [\n      0,\n      100,\n      500\n    ],\n    \"overload_multipliers\": [\n      2,\n      3,\n      4\n    ],\n    \"short_cache_min_algo_steps_to_cache\": 50,\n    \"short_cache_min_cacheable_distance\": 10,\n    \"short_cache_size\": 5,\n    \"short_request_max_steps\": 1000,\n    \"short_request_ratio\": 0.5,\n    \"stale_enemy_with_same_destination_collision_penalty\": 30,\n    \"start_to_goal_cost_multiplier_to_terminate_path_find\": 500,\n    \"use_path_cache\": true\n  },\n  \"pollution\": {\n    \"ageing\": 1,\n    \"diffusion_ratio\": 0.02,\n    \"enabled\": true,\n    \"enemy_attack_pollution_consumption_modifier\": 1,\n    \"expected_max_per_chunk\": 150,\n    \"max_pollution_to_restore_trees\": 20,\n    \"min_pollution_to_damage_trees\": 60,\n    \"min_to_diffuse\": 15,\n    \"min_to_show_per_chunk\": 50,\n    \"pollution_per_tree_damage\": 50,\n    \"pollution_restored_per_tree_damage\": 10,\n    \"pollution_with_max_forest_damage\": 150\n  },\n  \"steering\": {\n    \"default\": {\n      \"force_unit_fuzzy_goto_behavior\": false,\n      \"radius\": 1.2,\n      \"separation_factor\": 1.2,\n      \"separation_force\": 0.005\n    },\n    \"moving\": {\n      \"force_unit_fuzzy_goto_behavior\": false,\n      \"radius\": 3,\n      \"separation_factor\": 3,\n      \"separation_force\": 0.01\n    }\n  },\n  \"unit_group\": {\n    \"max_gathering_unit_groups\": 30,\n    \"max_group_gathering_time\": 36000,\n    \"max_group_member_fallback_factor\": 3,\n    \"max_group_radius\": 30,\n    \"max_group_slowdown_factor\": 0.3,\n    \"max_member_slowdown_when_ahead\": 0.6,\n    \"max_member_speedup_when_behind\": 1.4,\n    \"max_unit_group_size\": 200,\n    \"max_wait_time_for_late_members\": 7200,\n    \"member_disown_distance\": 10,\n    \"min_group_gathering_time\": 3600,\n    \"min_group_radius\": 5,\n    \"tick_tolerance_when_member_arrives\": 60\n  }\n}\n"
    }
  },
  {
    "kind": "PersistentVolumeClaim",
    "apiVersion": "v1",
    "metadata": {
      "name": "release-name-factorio-config",
      "labels": {
        "app.kubernetes.io/instance": "release-name",
        "app.kubernetes.io/managed-by": "Helm",
        "app.kubernetes.io/name": "factorio",
        "app.kubernetes.io/version": "stable",
        "helm.sh/chart": "factorio-1.1.2"
      },
      "annotations": null
    },
    "spec": {
      "accessModes": [
        "ReadWriteOnce"
      ],
      "resources": {
        "requests": {
          "storage": "1Gi"
        }
      }
    }
  },
  {
    "apiVersion": "v1",
    "kind": "Service",
    "metadata": {
      "name": "release-name-factorio",
      "labels": {
        "app.kubernetes.io/instance": "release-name",
        "app.kubernetes.io/managed-by": "Helm",
        "app.kubernetes.io/name": "factorio",
        "app.kubernetes.io/version": "stable",
        "helm.sh/chart": "factorio-1.1.2"
      },
      "annotations": null
    },
    "spec": {
      "type": "ClusterIP",
      "ports": [
        {
          "port": 27015,
          "targetPort": "rcon",
          "protocol": "TCP",
          "name": "rcon"
        },
        {
          "port": 34197,
          "targetPort": "server",
          "protocol": "UDP",
          "name": "server"
        }
      ],
      "selector": {
        "app.kubernetes.io/name": "factorio",
        "app.kubernetes.io/instance": "release-name"
      }
    }
  },
  {
    "apiVersion": "apps/v1",
    "kind": "Deployment",
    "metadata": {
      "name": "release-name-factorio",
      "labels": {
        "app.kubernetes.io/instance": "release-name",
        "app.kubernetes.io/managed-by": "Helm",
        "app.kubernetes.io/name": "factorio",
        "app.kubernetes.io/version": "stable",
        "helm.sh/chart": "factorio-1.1.2"
      }
    },
    "spec": {
      "revisionHistoryLimit": 3,
      "replicas": 1,
      "strategy": {
        "type": "Recreate"
      },
      "selector": {
        "matchLabels": {
          "app.kubernetes.io/name": "factorio",
          "app.kubernetes.io/instance": "release-name"
        }
      },
      "template": {
        "metadata": {
          "labels": {
            "app.kubernetes.io/name": "factorio",
            "app.kubernetes.io/instance": "release-name"
          }
        },
        "spec": {
          "serviceAccountName": "default",
          "automountServiceAccountToken": true,
          "dnsPolicy": "ClusterFirst",
          "enableServiceLinks": true,
          "initContainers": [
            {
              "command": [
                "sh",
                "-c",
                "mkdir -p /factorio/config\ncp -vL /helmconfig/* /factorio/config/\n"
              ],
              "image": "busybox",
              "imagePullPolicy": "IfNotPresent",
              "name": "copy-configmap",
              "securityContext": {
                "runAsUser": 0
              },
              "volumeMounts": [
                {
                  "mountPath": "/helmconfig/",
                  "name": "factorio-config"
                },
                {
                  "mountPath": "/factorio/",
                  "name": "config"
                }
              ]
            }
          ],
          "containers": [
            {
              "name": "release-name-factorio",
              "image": "factoriotools/factorio:stable",
              "imagePullPolicy": "IfNotPresent",
              "env": [
                {
                  "name": "GENERATE_NEW_SAVE",
                  "value": "false"
                },
                {
                  "name": "LOAD_LATEST_SAVE",
                  "value": "true"
                },
                {
                  "name": "PORT",
                  "value": "34197"
                },
                {
                  "name": "RCON_PORT",
                  "value": "27015"
                },
                {
                  "name": "SAVE_NAME",
                  "value": "_autosave1"
                },
                {
                  "name": "TOKEN",
                  "value": ""
                },
                {
                  "name": "TZ",
                  "value": "UTC"
                },
                {
                  "name": "UPDATE_MODS_ON_START",
                  "value": "false"
                },
                {
                  "name": "USERNAME",
                  "value": ""
                }
              ],
              "ports": [
                {
                  "name": "rcon",
                  "containerPort": 27015,
                  "protocol": "TCP"
                },
                {
                  "name": "server",
                  "containerPort": 34197,
                  "protocol": "UDP"
                }
              ],
              "volumeMounts": [
                {
                  "name": "config",
                  "mountPath": "/factorio"
                },
                {
                  "name": "factorio-config",
                  "mountPath": "/helmconfig/map_settings.json",
                  "subPath": "map_settings.json"
                }
              ],
              "livenessProbe": {
                "tcpSocket": {
                  "port": 27015
                },
                "initialDelaySeconds": 0,
                "failureThreshold": 3,
                "timeoutSeconds": 1,
                "periodSeconds": 10
              },
              "readinessProbe": {
                "tcpSocket": {
                  "port": 27015
                },
                "initialDelaySeconds": 0,
                "failureThreshold": 3,
                "timeoutSeconds": 1,
                "periodSeconds": 10
              },
              "startupProbe": {
                "tcpSocket": {
                  "port": 27015
                },
                "initialDelaySeconds": 0,
                "failureThreshold": 30,
                "timeoutSeconds": 1,
                "periodSeconds": 5
              }
            }
          ],
          "volumes": [
            {
              "name": "config",
              "persistentVolumeClaim": {
                "claimName": "release-name-factorio-config"
              }
            },
            {
              "name": "factorio-config",
              "configMap": {
                "name": "release-name-factorio-settings"
              }
            }
          ]
        }
      }
    }
  }
]